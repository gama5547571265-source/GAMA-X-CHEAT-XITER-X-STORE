    <!DOCTYPE html>
    <html lang="ar" dir="rtl">
    <head>
        <link rel="icon" type="image/x-icon" href="hero-image.jpg">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>GAMA X CHEAT - Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
        <style>
  .floating-card,.login-container{border-radius:20px;text-align:center}.about-text h3,.about-text p,.btn,.contact-info,.feature-item,.floating-card,.login-container,.section-title{text-align:center}.btn,.contact-btn,.feature-item,.logout-btn,.nav-links a,.product-card,.profile-btn,.profile-dropdown,body{transition:.3s}.add-to-cart,.btn,.cart-btn,.logout-btn,.profile-btn,.quantity-btn,.star,.theme-toggle{cursor:pointer}.btn,.contact-btn,.footer-section a,.login-footer a,.nav-links a,.profile-link{text-decoration:none}.chat-input input,.checkout-form input[type=datetime-local],.copy-btn,.filter-btn,.login-form input,body{font-family:Tajawal,sans-serif}:root{--primary:#0066FF;--secondary:#0080FF;--accent:#66B2FF;--success:#4ecdc4;--dark:#0F0F0F;--light:#F5F5F5;--text:#F5F5F5}[data-theme=dark]{--primary:#3399FF;--secondary:#66B2FF;--accent:#99CCFF;--dark:#1a1a1a;--light:#0F0F0F;--text:#F5F5F5}*{margin:0;padding:0;box-sizing:border-box}body{background:var(--dark);color:var(--text);line-height:1.6;scroll-behavior:smooth}@keyframes glow{0%,100%{box-shadow:0 0 20px rgba(0,102,255,.5)}50%{box-shadow:0 0 40px rgba(0,102,255,.8)}}@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(0,102,255,.7)}70%{box-shadow:0 0 0 15px rgba(0,102,255,0)}100%{box-shadow:0 0 0 0 rgba(0,102,255,0)}}@keyframes slideUp{from{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}.login-screen{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,var(--dark) 0,#1a1a1a 100%);display:flex;justify-content:center;align-items:center;z-index:10000;animation:.5s ease-out slideUp}.login-container{background:rgba(255,255,255,.1);backdrop-filter:blur(20px);padding:3rem;width:90%;max-width:400px;border:1px solid rgba(0,102,255,.3);box-shadow:0 20px 40px rgba(0,0,0,.3)}.floating-card,.header,.product-card{backdrop-filter:blur(10px)}.cart-items,.login-header{margin-bottom:2rem}.feature-item i,.floating-card i,.loading-product i,.login-header i{font-size:3rem;color:var(--primary);margin-bottom:1rem}.login-header h1{color:var(--primary);font-size:2rem;margin-bottom:.5rem;font-weight:900}.loading-product p,.login-footer p,.login-header p{color:var(--text);opacity:.8}.login-form{animation:.6s ease-out slideUp}.login-form .form-group{margin-bottom:1.5rem;text-align:right}.login-form label{display:block;margin-bottom:.5rem;color:var(--text);font-weight:600;display:flex;align-items:center;gap:.5rem}.login-form input{width:100%;padding:1rem;background:rgba(255,255,255,.1);border:1px solid rgba(0,102,255,.3);border-radius:10px;color:var(--text);transition:.3s}.checkout-form input:focus,.checkout-form textarea:focus,.form-group input:focus,.form-group textarea:focus,.login-form input:focus{outline:0;border-color:var(--primary);box-shadow:0 0 0 2px rgba(0,102,255,.2)}.login-btn{width:100%;padding:1rem;margin-bottom:1rem}.login-footer{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(255,255,255,.1)}.login-footer a{color:var(--primary);font-weight:600}.login-footer a:hover{text-decoration:underline}.hidden{display:none!important}.user-profile{position:relative}.profile-btn{background:var(--primary);color:#fff;border:none;padding:.5rem 1rem;border-radius:50px;display:flex;align-items:center;gap:.5rem}.logo,.logout-btn{align-items:center}.add-to-cart:hover,.cart-btn:hover,.chat-input button:hover,.contact-btn:hover,.profile-btn:hover,.theme-toggle:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,102,255,.4)}.profile-dropdown{position:absolute;top:100%;left:0;background:var(--dark);border:1px solid rgba(0,102,255,.3);border-radius:10px;padding:1rem;min-width:200px;box-shadow:0 10px 30px rgba(0,0,0,.3);opacity:0;visibility:hidden;transform:translateY(-10px);z-index:1000}.user-profile:hover .profile-dropdown{opacity:1;visibility:visible;transform:translateY(0)}.profile-info{padding-bottom:1rem;border-bottom:1px solid rgba(255,255,255,.1);margin-bottom:1rem}.hero,.nav{max-width:1200px;margin:0 auto;display:flex}.profile-info strong{color:var(--text);display:block;margin-bottom:.25rem}.profile-info span{color:var(--text);opacity:.7;font-size:.9rem}.logout-btn{width:100%;background:0 0;color:var(--text);border:1px solid rgba(255,255,255,.2);padding:.75rem;border-radius:5px;display:flex;justify-content:center;gap:.5rem}.logout-btn:hover{background:rgba(220,53,69,.1);border-color:#dc3545;color:#dc3545}.header{background:rgba(15,15,15,.95);position:fixed;top:0;width:100%;z-index:1000;box-shadow:0 2px 20px rgba(0,0,0,.3);border-bottom:1px solid rgba(0,102,255,.2)}.about-content,.add-testimonial-form,.contact-content,.floating-card,.product-card{box-shadow:0 10px 30px rgba(0,0,0,.3)}.nav{justify-content:space-between;align-items:center;padding:1rem 2rem}.cart-btn,.nav-links a,.theme-toggle{padding:.5rem 1rem;position:relative}.logo{display:flex;font-size:1.5rem;font-weight:900;color:var(--primary);text-shadow:0 0 10px rgba(0,102,255,.5)}.logo i{margin-left:.5rem}.nav-links{display:flex;gap:2rem}.nav-links a{color:var(--text);font-weight:600;border-radius:5px}.nav-links a.active,.nav-links a:hover{color:var(--primary);background:rgba(0,102,255,.1)}.nav-links a.active::after{content:'';position:absolute;bottom:-5px;left:0;width:100%;height:2px;background:var(--primary)}.nav-actions{display:flex;gap:1rem;align-items:center}.cart-btn,.theme-toggle{background:var(--primary);color:#fff;border:none;border-radius:50px;display:flex;align-items:center;gap:.5rem;overflow:hidden}.cart-count{background:var(--secondary);color:#fff;border-radius:50%;padding:.2rem .5rem;font-size:.8rem;font-weight:700}.hero{min-height:100vh;align-items:center;padding:6rem 2rem 2rem;gap:4rem;background:linear-gradient(135deg,var(--dark) 0,#1a1a1a 100%);position:relative;overflow:hidden}.hero::before{content:'';position:absolute;top:-50%;right:-20%;width:600px;height:600px;border-radius:50%;background:linear-gradient(135deg,var(--primary) 0,var(--secondary) 100%);opacity:.1;z-index:0}.contact-item a:hover,.footer-section a:hover{opacity:1;color:var(--primary)}.hero-content{flex:1;position:relative;z-index:1}.hero-title{font-size:3.5rem;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:1.5rem;line-height:1.2;font-weight:900}.hero-description{font-size:1.2rem;color:var(--text);opacity:.8;margin-bottom:2rem;max-width:500px}.cart-actions,.hero-buttons{display:flex;gap:1rem}.btn{padding:1rem 2rem;border:none;border-radius:50px;font-size:1rem;font-weight:600;display:inline-block;position:relative;overflow:hidden}.btn-save,.btn.primary{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff}.btn.secondary{background:0 0;color:var(--primary);border:2px solid var(--primary)}.nav-links a::after,.section-title::after{position:absolute;background:linear-gradient(90deg,var(--primary),var(--secondary));content:''}.btn:hover{transform:translateY(-3px);box-shadow:0 10px 25px rgba(0,102,255,.3)}.floating-card{background:rgba(255,255,255,.1);padding:2rem;animation:3s ease-in-out infinite float;border:1px solid rgba(255,255,255,.2)}.floating-card h3{color:var(--text);font-weight:600}.about{padding:5rem 2rem;background:var(--dark);position:relative}.container{max-width:1200px;margin:0 auto}.section-title{font-size:2.5rem;margin-bottom:3rem;color:var(--text);position:relative}.section-title::after{bottom:-10px;left:50%;transform:translateX(-50%);width:100px;height:3px;border-radius:2px}.about-content,.contact-content{background:rgba(255,255,255,.05);backdrop-filter:blur(10px);border-radius:20px;padding:3rem;border:1px solid rgba(0,102,255,.2)}.about-text h3{font-size:2rem;color:var(--primary);margin-bottom:1.5rem}.about-text p{font-size:1.1rem;line-height:1.8;margin-bottom:2rem;opacity:.9}.features-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:2rem;margin:3rem 0}.feature-item{background:rgba(255,255,255,.05);padding:2rem;border-radius:15px;border:1px solid rgba(0,102,255,.2)}.feature-item:hover,.testimonial-card:hover{transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,102,255,.2);border-color:var(--primary)}.feature-item h4{font-size:1.3rem;margin-bottom:1rem;color:var(--text)}.feature-item p{font-size:.9rem;opacity:.8}.contact-info{margin-top:3rem}.contact-info h4{font-size:1.5rem;margin-bottom:1.5rem;color:var(--primary)}.contact-methods{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap}.contact-btn{display:flex;align-items:center;gap:.5rem;padding:1rem 2rem;background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;border-radius:50px;font-weight:600}.contact,.products{padding:5rem 2rem;background:linear-gradient(135deg,#1a1a1a 0,var(--dark) 100%)}.products-grid{display:grid;gap:2rem;justify-content:center}.products-grid:has(.product-card:only-child){grid-template-columns:minmax(300px,500px);justify-content:center}.products-grid:has(.product-card:nth-child(2):last-child){grid-template-columns:repeat(2,minmax(300px,1fr))}.products-grid:has(.product-card:nth-child(3)){grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}.product-card{background:rgba(255,255,255,.05);border-radius:20px;overflow:hidden;border:1px solid rgba(0,102,255,.2);display:flex;flex-direction:column;height:100%;position:relative}.add-to-cart,.product-image-fallback{background:linear-gradient(135deg,var(--primary),var(--secondary));display:flex}.product-card:hover{transform:translateY(-10px);box-shadow:0 20px 40px rgba(0,102,255,.3);border-color:var(--primary)}.product-image-container{position:relative;width:100%;height:250px;overflow:hidden}.product-img{width:100%;height:100%;object-fit:cover;transition:transform .3s}.product-card:hover .product-img{transform:scale(1.05)}.product-image-fallback{width:100%;height:100%;align-items:center;justify-content:center;color:#fff;font-size:3rem}.no-products i,.product-emoji{font-size:4rem}.product-image-fallback.hidden{display:none}.product-info{padding:1.5rem;display:flex;flex-direction:column;flex-grow:1}.product-name{font-size:1.3rem;font-weight:700;margin-bottom:.75rem;color:var(--text);line-height:1.4}.product-description{color:var(--text);opacity:.8;margin-bottom:1rem;line-height:1.6;flex-grow:1;font-size:.95rem}.product-meta{display:flex;justify-content:space-between;align-items:center;margin-top:auto}.product-price{font-size:1.4rem;font-weight:700;color:var(--primary)}.add-to-cart{padding:.75rem 1.5rem;color:#fff;border:none;border-radius:10px;font-size:.9rem;font-weight:600;transition:.3s;align-items:center;gap:.5rem;white-space:nowrap}.loading-product,.no-products{grid-column:1/-1;background:rgba(255,255,255,.05);text-align:center}.no-products{padding:4rem 2rem;border-radius:20px;border:1px solid rgba(0,102,255,.2)}.no-products i{color:var(--primary);margin-bottom:1.5rem}.no-products p{color:var(--text);font-size:1.2rem;margin-bottom:.5rem}.loading-product{padding:3rem;border-radius:15px;border:1px solid rgba(0,102,255,.2)}.testimonials{padding:5rem 2rem;background:var(--dark)}.add-testimonial-form,.testimonial-card{padding:2rem;backdrop-filter:blur(10px)}.testimonials-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.contact-info,.footer-content{grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}.testimonial-card{background:rgba(255,255,255,.05);border-radius:15px;border:1px solid rgba(0,102,255,.2);transition:.3s}.testimonial-content{margin-bottom:1rem}.testimonial-text{font-style:italic;line-height:1.6;opacity:.9}.testimonial-author{display:flex;align-items:center;gap:1rem}.author-avatar{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--secondary));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}.author-info h4{color:var(--text);margin-bottom:.25rem}.author-info p{color:var(--primary);font-size:.9rem;opacity:.8}.add-testimonial-form{background:rgba(255,255,255,.05);border-radius:20px;margin-bottom:3rem;border:1px solid rgba(0,102,255,.2)}.add-testimonial-form h3{color:var(--primary);margin-bottom:1.5rem;text-align:center;font-size:1.5rem}.checkout-form .form-group,.form-group{margin-bottom:1.5rem}.checkout-form label,.form-group label{display:block;margin-bottom:.5rem;color:var(--text);font-weight:600}.checkout-form input,.checkout-form textarea,.form-group input,.form-group textarea{width:100%;padding:.75rem;background:rgba(255,255,255,.1);border:1px solid rgba(0,102,255,.3);border-radius:10px;color:var(--text);font-family:Tajawal,sans-serif;transition:.3s}.form-group textarea{resize:vertical;min-height:100px}.rating-stars{display:flex;gap:.5rem;direction:ltr}.star{font-size:2rem;color:#666;transition:.3s}.star.active,.star:hover{color:gold;transform:scale(1.2)}.testimonial-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.author-rating{color:gold;font-size:1rem}.testimonial-date{color:var(--primary);font-size:.8rem;opacity:.7;margin-top:1rem;text-align:left}.contact-info{display:grid;gap:2rem}.contact-item,.contact-item i{display:flex;align-items:center}.contact-item{gap:1rem;padding:1.5rem;background:rgba(255,255,255,.05);border-radius:15px;border:1px solid rgba(0,102,255,.2);transition:.3s}.contact-item:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,102,255,.2);border-color:var(--primary)}.contact-item i{font-size:2rem;color:var(--primary);width:50px;height:50px;justify-content:center;background:rgba(0,102,255,.1);border-radius:50%}.contact-item h4{color:var(--text);margin-bottom:.5rem}.contact-item a,.contact-item p{color:var(--text);opacity:.8;text-decoration:none;transition:opacity .3s}.footer{background:var(--dark);border-top:1px solid rgba(0,102,255,.2);padding:3rem 0 1rem}.footer-content{display:grid;gap:3rem;margin-bottom:2rem}.footer-section h3{color:var(--primary);margin-bottom:1rem;font-size:1.5rem}.footer-section h4{color:var(--text);margin-bottom:1rem;font-size:1.2rem}.footer-section p{color:var(--text);opacity:.8;line-height:1.6}.footer-section a{display:block;color:var(--text);opacity:.8;margin-bottom:.5rem;transition:.3s}.footer-section a:hover{transform:translateX(5px)}.footer-bottom{text-align:center;padding-top:2rem;border-top:1px solid rgba(255,255,255,.1)}.footer-bottom p{color:var(--text);opacity:.6}.cart-notification{position:fixed;top:100px;right:20px;background:var(--primary);color:#fff;padding:1rem 1.5rem;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,.3);z-index:10000;transform:translateX(400px);transition:transform .3s;display:flex;align-items:center;gap:.5rem}.cart-notification.show{transform:translateX(0)}.cart-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);z-index:10000;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;transition:.3s}.cart-modal.show,.modal-overlay.active{opacity:1;visibility:visible}.cart-modal-content{background:var(--dark);border:1px solid rgba(0,102,255,.3);border-radius:20px;padding:2rem;width:90%;max-width:500px;max-height:80vh;overflow-y:auto;transform:scale(.8);transition:transform .3s}.cart-btn,.modal-overlay,.profile-link,.theme-toggle{transition:.3s}.cart-modal.show .cart-modal-content,.modal-overlay.active .modal-content{transform:scale(1)}.cart-modal-header,.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:1rem}.cart-item,.order-item{justify-content:space-between}.cart-modal-header h3,.modal-title{color:var(--primary);margin:0}.btn .fa-spin,.remove-btn{margin-right:.5rem}.close-cart,.close-modal{background:0 0;border:none;color:var(--text);font-size:1.5rem;cursor:pointer;padding:.5rem}.quantity-btn,.remove-btn{color:#fff;width:30px;height:30px}.cart-item{display:flex;align-items:center;padding:1rem;background:rgba(255,255,255,.05);border-radius:10px;margin-bottom:1rem}.item-actions,.quantity-btn{align-items:center;display:flex}.item-info h4{margin:0 0 .5rem;color:var(--text)}.empty-cart i,.item-info p,.order-success i,.order-summary h4,.profile-link:hover{color:var(--primary)}.item-info p{margin:0;font-weight:600}.item-actions{gap:.5rem}.quantity-btn{background:var(--primary);border:none;border-radius:50%;justify-content:center}.profile-link,.remove-btn{cursor:pointer;align-items:center}.remove-btn{background:#dc3545;border:none;border-radius:50%;display:flex;justify-content:center}.cart-total{text-align:center;padding:1rem;background:rgba(0,102,255,.1);border-radius:10px;margin-bottom:1rem}.empty-cart{text-align:center;padding:2rem;color:var(--text);opacity:.7}.empty-cart i{font-size:3rem;margin-bottom:1rem}.checkout-form{text-align:right}.order-summary{background:rgba(255,255,255,.05);padding:1rem;border-radius:10px;margin:1rem 0}.order-summary h4{margin-bottom:1rem}.order-item{display:flex;padding:.5rem 0;border-bottom:1px solid rgba(255,255,255,.1)}.order-total{display:flex;justify-content:space-between;padding-top:1rem;margin-top:1rem;border-top:2px solid var(--primary)}.form-actions,.modal-actions{display:flex;gap:1rem;margin-top:2rem}.order-success{text-align:center;padding:2rem}.order-success i{font-size:4rem;margin-bottom:1rem}.order-success h3{color:var(--text);margin-bottom:1rem}.order-success p{color:var(--text);opacity:.8;margin-bottom:2rem}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:var(--dark)}::-webkit-scrollbar-thumb{background:linear-gradient(var(--primary),var(--secondary));border-radius:10px}::-webkit-scrollbar-thumb:hover{background:linear-gradient(var(--secondary),var(--primary))}.loading-spinner{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:var(--primary);animation:1s ease-in-out infinite spin}.theme-toggle:hover{animation:2s infinite glow}.cart-btn.added{animation:.5s pulse}.product-card::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,transparent,rgba(0,102,255,.1),transparent);transform:translateX(-100%);transition:transform .6s}.product-card:hover::before{transform:translateX(100%)}.btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:.5s}.btn:hover::before{left:100%}.nav-links a::after{bottom:0;left:0;width:0;height:2px;transition:width .3s}.nav-links a:hover::after{width:100%}.checkout-form input:invalid{border-color:#dc3545!important}.checkout-form input:valid{border-color:#28a745!important}.checkout-form input:focus{border-color:var(--primary)!important;box-shadow:0 0 0 2px rgba(0,102,255,.2)!important}.btn:disabled{opacity:.6;cursor:not-allowed}.floating-image-container{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);padding:1.5rem;border-radius:20px;animation:3s ease-in-out infinite float;border:1px solid rgba(255,255,255,.2);box-shadow:0 10px 30px rgba(0,0,0,.3);position:relative;overflow:hidden}.floating-hero-image{width:100%;max-width:400px;height:auto;border-radius:15px;object-fit:cover;box-shadow:0 8px 25px rgba(0,0,0,.4);transition:.3s;border:2px solid rgba(0,102,255,.3)}.floating-image-container:hover .floating-hero-image{transform:scale(1.05);box-shadow:0 15px 35px rgba(0,102,255,.4);border-color:var(--primary)}.image-glow{position:absolute;top:-10px;left:-10px;right:-10px;bottom:-10px;background:linear-gradient(45deg,transparent,rgba(0,102,255,.1),transparent);border-radius:25px;z-index:-1;animation:2s ease-in-out infinite glow}.floating-image-container::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,rgba(0,102,255,.1),rgba(0,102,255,.05));border-radius:20px;z-index:-1}.hero-image{flex:1;position:relative;display:flex;justify-content:center;align-items:center}@keyframes float{0%,100%{transform:translateY(0);transform:translateY(0) rotate(0)}50%{transform:translateY(-20px);transform:translateY(-20px) rotate(1deg)}}@keyframes glow{0%,100%{opacity:.5;transform:scale(1)}50%{opacity:.8;transform:scale(1.02)}}.profile-link{display:block;width:100%;padding:.75rem;background:0 0;color:var(--text);border:none;text-align:right;border-bottom:1px solid rgba(255,255,255,.1);display:flex;gap:.5rem}.modal-overlay,.platform-tag{align-items:center;display:flex;backdrop-filter:blur(10px)}.profile-link:hover{background:rgba(0,102,255,.1)}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.8);z-index:10000;justify-content:center;opacity:0;visibility:hidden}.modal-content{background:var(--dark);border:1px solid rgba(0,102,255,.3);border-radius:20px;padding:2rem;width:90%;max-width:500px;max-height:80vh;overflow-y:auto;transform:scale(.9);transition:transform .3s}.chat-button,.chat-input button,.filter-btn,.modal-btn{transition:.3s;cursor:pointer}.modal-btn{flex:1;padding:1rem 2rem;border:none;border-radius:10px;font-weight:600}.btn-cancel{background:rgba(255,255,255,.1);color:var(--text);border:1px solid rgba(255,255,255,.2)}.modal-btn:hover{transform:translateY(-2px)}.product-platforms{position:absolute;top:10px;right:10px;display:flex;flex-direction:column;gap:5px;z-index:2}.platform-tag{padding:4px 8px;border-radius:15px;font-size:.7rem;font-weight:600;gap:4px;border:1px solid rgba(255,255,255,.2);animation:.5s ease-out slideUp}.platform-android{background:rgba(61,220,132,.9);color:#000}.platform-ios{background:rgba(0,0,0,.8);color:#fff}.platform-pc{background:rgba(0,120,215,.9);color:#fff}.platform-ps4,.platform-ps5{background:rgba(0,65,155,.9);color:#fff}.platform-xbox{background:rgba(16,124,16,.9);color:#fff}.chat-widget{position:fixed;bottom:20px;left:20px;z-index:1000}.chat-button{width:60px;height:60px;background:linear-gradient(135deg,var(--primary),var(--secondary));border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.5rem;box-shadow:0 5px 15px rgba(0,102,255,.4);animation:2s infinite pulse;position:relative}.chat-button:hover{transform:scale(1.1);box-shadow:0 8px 25px rgba(0,102,255,.6)}.chat-container{position:absolute;bottom:80px;left:0;width:350px;height:500px;background:var(--dark);border:1px solid rgba(0,102,255,.3);border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,.3);display:none;flex-direction:column;backdrop-filter:blur(10px)}.chat-container.active{display:flex}.chat-header{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;padding:1rem;border-radius:15px 15px 0 0;display:flex;justify-content:space-between;align-items:center}.chat-header h4{margin:0;font-size:1.1rem}.close-chat{background:0 0;border:none;color:#fff;cursor:pointer;font-size:1.2rem}.chat-messages{flex:1;padding:1rem;overflow-y:auto;display:flex;flex-direction:column;gap:.5rem}.message{padding:.75rem;border-radius:10px;max-width:80%;word-wrap:break-word}.chat-input input,.message.user{border:1px solid rgba(0,102,255,.3)}.message.user{background:rgba(0,102,255,.2);align-self:flex-end}.message.support{background:rgba(255,255,255,.1);align-self:flex-start;border:1px solid rgba(255,255,255,.2)}.message-time{font-size:.7rem;opacity:.7;margin-top:.25rem}.chat-input{display:flex;padding:1rem;border-top:1px solid rgba(255,255,255,.1);gap:.5rem}.chat-input input{flex:1;padding:.75rem;background:rgba(255,255,255,.1);border-radius:10px;color:var(--text)}.chat-input button{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;border:none;border-radius:10px;padding:.75rem 1rem}.chat-notification-badge{position:absolute;top:-5px;right:-5px;background:#f44;color:#fff;border-radius:50%;width:20px;height:20px;font-size:.7rem;display:flex;align-items:center;justify-content:center}.filter-buttons{display:flex;justify-content:center;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.filter-btn{padding:.75rem 1.5rem;background:rgba(255,255,255,.05);border:1px solid rgba(0,102,255,.3);border-radius:50px;color:var(--text);display:flex;align-items:center;gap:.5rem;font-weight:600}.filter-btn:hover{background:rgba(0,102,255,.1);border-color:var(--primary);transform:translateY(-2px)}.filter-btn.active{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;border-color:var(--primary);box-shadow:0 5px 15px rgba(0,102,255,.3)}.checkout-form input[type=datetime-local]{direction:ltr;text-align:right}.checkout-form input[type=datetime-local]::-webkit-calendar-picker-indicator{filter:invert(.8);cursor:pointer}@media (max-width:768px){.nav,.nav-links{gap:1rem}.footer-content,.hero{text-align:center}.features-grid,.footer-content{grid-template-columns:1fr}.nav{flex-direction:column;padding:1rem}.hero{flex-direction:column;padding-top:8rem;gap:2rem}.hero-title{font-size:2.5rem}.hero-buttons{justify-content:center;flex-wrap:wrap}.about-content,.contact-content{padding:2rem 1rem}.contact-methods{flex-direction:column;align-items:center}.contact-btn{width:100%;justify-content:center}.products-grid:has(.product-card:nth-child(2):last-child){grid-template-columns:1fr}.products-grid:has(.product-card:only-child){grid-template-columns:1fr}.cart-modal-content{width:95%;padding:1rem}.cart-item{flex-direction:column;align-items:flex-start;gap:1rem}.item-actions{align-self:flex-end}.cart-actions,.form-actions{flex-direction:column}.cart-notification{right:10px;left:10px;transform:translateY(-100px)}.cart-notification.show{transform:translateY(0)}.login-container{padding:2rem 1.5rem}.nav-actions{flex-wrap:wrap;justify-content:center}.chat-container{width:300px;height:400px;left:10px;bottom:70px}.chat-widget{bottom:15px;left:15px}.chat-button{width:50px;height:50px;font-size:1.2rem}.filter-buttons{gap:.5rem}.filter-btn{padding:.6rem 1.2rem;font-size:.9rem}.checkout-form input[type=datetime-local]{font-size:16px}}@media (min-width:768px){.products-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width:480px){.hero-title,.section-title{font-size:2rem}.btn{padding:.75rem 1.5rem;font-size:.9rem}.product-image-container{height:200px}.product-name{font-size:1.2rem}.product-price{font-size:1.3rem}.login-container{padding:1.5rem 1rem}.filter-buttons{flex-direction:column;align-items:center}.filter-btn{width:200px;justify-content:center}.main-content{padding:70px .5rem .5rem}.product-card{padding:.8rem}}@media (max-width:768px) and (orientation:landscape){.main-content{padding:60px 1rem 70px}.products-grid{grid-template-columns:repeat(3,1fr)}.product-image{height:80px}.product-image i{font-size:1.8rem}.nav-item span{display:none}.nav-item i{margin-bottom:0;font-size:1.3rem}}@supports (padding:max(0px)){.header{padding-top:max(1rem,env(safe-area-inset-top))}.bottom-nav{padding-bottom:max(.7rem,env(safe-area-inset-bottom))}.main-content{padding-left:max(1rem,env(safe-area-inset-left));padding-right:max(1rem,env(safe-area-inset-right))}}.touch-feedback{transition:.1s}.touch-feedback:active{transform:scale(.95);opacity:.8}.loading{display:inline-block;width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:var(--primary);animation:1s ease-in-out infinite spin}@keyframes spin{to{transform:rotate(360deg)}}.notification{position:fixed;top:80px;right:1rem;left:1rem;background:var(--primary);color:#fff;padding:1rem;border-radius:10px;text-align:center;z-index:1001;transform:translateY(-100px);opacity:0;transition:.3s}.notification.show{transform:translateY(0);opacity:1}.copy-field-container{display:flex;gap:.5rem;align-items:stretch}.copy-field{flex:1;background:rgba(61,220,132,.1)!important;border:2px solid var(--android)!important;color:var(--android)!important;font-weight:700;text-align:center;direction:ltr}.copy-btn{background:var(--android)!important;color:#fff!important;border:none!important;border-radius:8px!important;padding:.75rem 1rem!important;cursor:pointer;transition:.3s;white-space:nowrap;display:flex;align-items:center;gap:.5rem}.copy-btn:hover{background:#34a853!important;transform:translateY(-2px)}.copy-btn:active{transform:scale(.95)}.copy-btn.copied{background:var(--primary)!important}.copy-btn.copied i::before{content:"âœ“"}.field-note{color:var(--android);font-size:.8rem;margin-top:.5rem;display:block;text-align:center}@media (max-width:480px){.copy-field-container{flex-direction:column}.copy-btn{width:100%;justify-content:center}}
        </style>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
        
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  
    </head>
    <body>
        <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
        <div id="loginScreen" class="login-screen">
            <div class="login-container">
                <div class="login-header">
                    <i class="fas fa-gamepad"></i>
                    <h1>GAMA X CHEAT</h1>
                    <p>Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</p>
                </div>
                
                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="email"><i class="fas fa-envelope"></i> Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="email" required placeholder="Ø§Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    
                    <div class="form-group">
                        <label for="password"><i class="fas fa-lock"></i> ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="password" required placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    
                    <button type="submit" class="btn primary login-btn">
                        <i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    </button>
                    
                    <div class="login-footer">
                        <p>Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a href="#" id="showRegister">Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†</a></p>
                    </div>
                </form>
                
                <form id="registerForm" class="login-form hidden">
                    <div class="form-group">
                        <label for="regName"><i class="fas fa-user"></i> Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                        <input type="text" id="regName" required placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
                    </div>
                    
                    <div class="form-group">
                        <label for="regEmail"><i class="fas fa-envelope"></i> Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="regEmail" required placeholder="Ø§Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    
                    <div class="form-group">
                        <label for="regPassword"><i class="fas fa-lock"></i> ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="regPassword" required placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)">
                    </div>
                    
                    <div class="form-group">
                        <label for="regPhone"><i class="fas fa-phone"></i> Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                        <input type="tel" id="regPhone" required placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ">
                    </div>
                    
                    <button type="submit" class="btn primary login-btn">
                        <i class="fas fa-user-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
                    </button>
                    
                    <div class="login-footer">
                        <p>Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ <a href="#" id="showLogin">Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a></p>
                    </div>
                </form>
            </div>
        </div>

        <!-- Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ù…Ø®ÙÙŠ Ø­ØªÙ‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„) -->
        <div id="mainSite" class="hidden">
            <header class="header">
                <nav class="nav">
                    <div class="logo">
                        <i class="fas fa-gamepad"></i>
                        <span>GAMA X CHEAT</span>
                    </div>
                    <div class="nav-links">
                        <a href="#home" class="active">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                        <a href="#products">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a>
                        <a href="#about">Ù…Ù† Ù†Ø­Ù†</a>
                        <a href="#testimonials">Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</a>
                        <a href="#contact">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
                    </div>
    <div class="nav-actions">
        <div class="user-profile">
            <button class="profile-btn">
                <i class="fas fa-user"></i>
                <span id="userName">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span>
            </button>
            <div class="profile-dropdown">
                <div class="profile-info">
                    <strong id="dropdownUserName">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</strong>
                    <span id="dropdownUserEmail">user@example.com</span>
                </div>
                <a href="#" class="profile-link" id="openProfile">
                    <i class="fas fa-user-cog"></i> Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
                </a>
                <button id="logoutBtn" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                </button>
            </div>
        </div>
        <button class="cart-btn">
            <i class="fas fa-shopping-cart"></i>
            <span class="cart-count">0</span>
        </button>
        <button class="theme-toggle">
            <i class="fas fa-moon"></i>
        </button>
    </div>
                </nav>
            </header>
            
    <section id="home" class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Ø§Ø±ØªÙ‚Ù Ø¨Ù…Ø³ØªÙˆÙ‰ Ø£Ù„Ø¹Ø§Ø¨Ùƒ</h1>
            <p class="hero-description">Ø§ÙƒØªØ´Ù Ø£Ø­Ø¯Ø« Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ÙˆØ§Ù„ØªØ¹Ø²ÙŠØ²Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ù„ØªØªÙÙˆÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†</p>
            <div class="hero-buttons">
                <a href="#products" class="btn primary">ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</a>
                <a href="#about" class="btn secondary">Ø§Ø¹Ø±Ù Ø§Ù„Ù…Ø²ÙŠØ¯</a>
            </div>
        </div>
        <div class="hero-image">
            <!-- Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¹ Ù†ÙØ³ ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒØ§Ø±Ø¯ Ø§Ù„Ø¹Ø§Ø¦Ù… -->
            <div class="floating-image-container">
                <img src="https://yt3.googleusercontent.com/vWqEho11wngt1Eei_v73K2Jurqm-oCV3GqopCY5PIj7FAkdXTegOHpCXrznGNHeLOeOj-bcC=s160-c-k-c0x00ffffff-no-rj" alt="GAMA X CHEAT - Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨" class="floating-hero-image">
                <div class="image-glow"></div>
            </div>
                    </div> <!-- Ø¥ØºÙ„Ø§Ù‚ mainSite -->

        <!-- Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§ -->
        <!-- Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
        <div class="chat-widget">
            <div class="chat-button" id="chatToggle">
                <i class="fas fa-comments"></i>
                <span class="chat-notification-badge hidden">1</span>
            </div>
            <div class="chat-container" id="chatContainer">
                <div class="chat-header">
                    <h4><i class="fas fa-headset"></i> Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</h4>
                    <button class="close-chat"><i class="fas fa-times"></i></button>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message support">
                        <div class="message-text">Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</div>
                        <div class="message-time">Ø§Ù„Ø¢Ù†</div>
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="messageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." maxlength="500">
                    <button id="sendMessage"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>

        </div>
    </section>
 
            <section id="about" class="about">
                <div class="container">
                    <h2 class="section-title">Ù…Ù† Ù†Ø­Ù†</h2>
                    <div class="about-content">
                        <div class="about-text">
                            <h3>GAMA X CHEAT - Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚ Ù„Ø´Ø­Ù† Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</h3>
                            <p>Ù†Ø­Ù† Ù…ØªØ¬Ø± Ø±Ø§Ø¦Ø¯ ÙÙŠ Ù…Ø¬Ø§Ù„ Ø´Ø­Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨ØŒ Ù†Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø§Øª Ù…ÙˆØ«ÙˆÙ‚Ø© ÙˆØ³Ø±ÙŠØ¹Ø© Ù„Ø¹Ø´Ø§Ù‚ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ÙÙŠ Ù…ØµØ± ÙˆØ§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ.</p>
                            
                            <div class="features-grid">
                                <div class="feature-item">
                                    <i class="fas fa-shield-alt"></i>
                                    <h4>Ø¢Ù…Ù† ÙˆÙ…ÙˆØ«ÙˆÙ‚</h4>
                                    <p>Ø®Ø¯Ù…Ø§ØªÙ†Ø§ Ù…Ø¶Ù…ÙˆÙ†Ø© 100% Ù…Ø¹ Ø¶Ù…Ø§Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹</p>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-bolt"></i>
                                    <h4>ØªÙˆØµÙŠÙ„ ÙÙˆØ±ÙŠ</h4>
                                    <p>Ø´Ø­Ù† Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¯ÙØ¹</p>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-headset"></i>
                                    <h4>Ø¯Ø¹Ù… ÙÙ†ÙŠ 24/7</h4>
                                    <p>ÙØ±ÙŠÙ‚ Ø¯Ø¹Ù… Ù…ØªØ§Ø­ Ø¹Ù„Ù‰ Ù…Ø¯Ø§Ø± Ø§Ù„Ø³Ø§Ø¹Ø©</p>
                                </div>
                            </div>

                            <div class="contact-info">
                                <h4>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§:</h4>
                                <div class="contact-methods">
                                    <a href="https://wa.me/201011907743" class="contact-btn">
                                        <i class="fab fa-whatsapp"></i>
                                        ÙˆØ§ØªØ³Ø§Ø¨ Ø¬Ø§Ù…Ø§
                                    </a>
                                    <a href="https://wa.me/201011907743" class="contact-btn">
                                        <i class="fab fa-whatsapp"></i>
                                        ÙˆØ§ØªØ³Ø§Ø¨ Ø¬Ø§Ù…Ø§
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
 
            <section id="products" class="products">
    <div class="container">
        <h2 class="section-title">Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h2>
        
        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙÙŠØ© -->
        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="all">
                <i class="fas fa-th-large"></i> Ø§Ù„ÙƒÙ„
            </button>
            <button class="filter-btn" data-filter="pc">
                <i class="fab fa-windows"></i> PC
            </button>
            <button class="filter-btn" data-filter="ios">
                <i class="fab fa-apple"></i> iOS
            </button>
            <button class="filter-btn" data-filter="android">
                <i class="fab fa-android"></i> Android
            </button>
        </div>
        
        <div class="products-grid" id="productsGrid">
            <div class="loading-product">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</p>
            </div>
        </div>
    </div>
</section>
<!-- 
            <section id="products" class="products">
                <div class="container">
                    <h2 class="section-title">Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h2>
                    <div class="products-grid" id="productsGrid">
                        <div class="loading-product">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</p>
                        </div>
                    </div>
                </div>
            </section> -->

            <section id="testimonials" class="testimonials">
                <div class="container">
                    <h2 class="section-title">Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>
                    
                    <div class="add-testimonial-form">
                        <h3>Ø´Ø§Ø±ÙƒÙ†Ø§ Ø¨Ø±Ø£ÙŠÙƒ</h3>
                        <form id="testimonialForm">
                            <div class="form-group">
                                <label for="customerName">Ø§Ø³Ù…Ùƒ:</label>
                                <input type="text" id="customerName" required placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">
                            </div>
                            <div class="form-group">
                                <label for="customerReview">Ø±Ø£ÙŠÙƒ:</label>
                                <textarea id="customerReview" required placeholder="Ø§ÙƒØªØ¨ Ø±Ø£ÙŠÙƒ Ø¹Ù† Ø®Ø¯Ù…Ø§ØªÙ†Ø§..." rows="4"></textarea>
                            </div>
                            <div class="form-group">
                                <label>ØªÙ‚ÙŠÙŠÙ…Ùƒ:</label>
                                <div class="rating-stars">
                                    <span class="star" data-rating="1">â˜…</span>
                                    <span class="star" data-rating="2">â˜…</span>
                                    <span class="star" data-rating="3">â˜…</span>
                                    <span class="star" data-rating="4">â˜…</span>
                                    <span class="star" data-rating="5">â˜…</span>
                                </div>
                                <input type="hidden" id="ratingValue" value="0">
                            </div>
                            <button type="submit" class="btn primary">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø£ÙŠ</button>
                        </form>
                    </div>

                    <div class="testimonials-grid" id="testimonialsGrid">
                        <div class="loading-testimonials">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡...</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="contact" class="contact">
                <div class="container">
                    <h2 class="section-title">Ø§ØªØµÙ„ Ø¨Ù†Ø§</h2>
                    <div class="contact-content">
                        <div class="contact-info">
                            <div class="contact-item">
                                <i class="fab fa-whatsapp"></i>
                                <div>
                                    <h4>ÙˆØ§ØªØ³Ø§Ø¨ Ø¬Ø§Ù…Ø§</h4>
                                    <a href="https://wa.me/201011907743">01011907743</a>
                                </div>
                            </div>
                            <div class="contact-item">
                                <i class="fab fa-whatsapp"></i>
                                <div>
                                    <h4>ÙˆØ§ØªØ³Ø§Ø¨ Ø¬Ø§Ù…Ø§</h4>
                                    <a href="https://wa.me/201011907743">01011907743</a>
                                </div>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-clock"></i>
                                <div>
                                    <h4>Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„</h4>
                                    <p>24/7 Ù…ØªØ§Ø­ÙˆÙ† Ù„Ø®Ø¯Ù…ØªÙƒ</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <footer class="footer">
                <div class="container">
                    <div class="footer-content">
                        <div class="footer-section">
                            <h3>GAMA X CHEAT</h3>
                            <p>Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚ Ù„Ø´Ø­Ù† Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</p>
                        </div>
                        <div class="footer-section">
                            <h4>Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h4>
                            <a href="#home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                            <a href="#products">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a>
                            <a href="#about">Ù…Ù† Ù†Ø­Ù†</a>
                            <a href="#contact">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
                        </div>
                        <div class="footer-section">
                            <h4>Ø§Ù„ØªÙˆØ§ØµÙ„</h4>
                            <a href="https://wa.me/201011907743">ÙˆØ§ØªØ³Ø§Ø¨ Ø¬Ø§Ù…Ø§</a>
                            <a href="https://wa.me/201011907743">ÙˆØ§ØªØ³Ø§Ø¨ Ø¬Ø§Ù…Ø§</a>
                        </div>
                    </div>
                    <div class="footer-bottom">
                        <p>&copy; 2025 GAMA X CHEAT. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
                    </div>
                </div>
            </footer>

            <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ -->
            <div id="profileModal" class="modal-overlay">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title"><i class="fas fa-user-cog"></i> Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h3>
                        <button class="close-modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="profileForm">
                        <div class="form-group">
                            <label for="profileName"><i class="fas fa-user"></i> Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                            <input type="text" id="profileName" required placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
                        </div>
                        
                        <div class="form-group">
                            <label for="profileEmail"><i class="fas fa-envelope"></i> Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                            <input type="email" id="profileEmail" required placeholder="Ø§Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label for="profilePhone"><i class="fas fa-phone"></i> Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                            <input type="tel" id="profilePhone" required placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ">
                        </div>
                        
                        <div class="form-group">
                            <label for="profileAddress"><i class="fas fa-map-marker-alt"></i> Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                            <textarea id="profileAddress" rows="3" placeholder="Ø§Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù†Ùƒ"></textarea>
                        </div>
                        
                        <div class="modal-actions">
                            <button type="button" class="modal-btn btn-cancel" id="closeProfile">Ø¥Ù„ØºØ§Ø¡</button>
                            <button type="submit" class="modal-btn btn-save">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>


        
        <script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log('ğŸš€ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§ØªØ­Ù…Ù„');
        initializeFirebase();
        setupAuth();
        setupEventListeners();
    });

    let cart = [];
    let currentUser = null;

    function initializeFirebase() {
        console.log('âœ… Firebase Ø§Ø´ØªØºÙ„');
    }

    // Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
    function setupAuth() {
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        firebase.auth().onAuthStateChanged((user) => {
            if (user) {
                // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                currentUser = user;
                showMainSite();
                loadUserData(user);
                loadProducts();
                loadTestimonials();
                loadCart();
            } else {
                // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                showLoginScreen();
            }
        });
    }

    function showLoginScreen() {
        document.getElementById('loginScreen').classList.remove('hidden');
        document.getElementById('mainSite').classList.add('hidden');
    }

    function showMainSite() {
        document.getElementById('loginScreen').classList.add('hidden');
        document.getElementById('mainSite').classList.remove('hidden');
    }

    function loadUserData(user) {
        // ØªØ­Ø¯ÙŠØ« Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        const userNameElements = document.querySelectorAll('#userName, #dropdownUserName');
        const userEmailElement = document.getElementById('dropdownUserEmail');
        
        userNameElements.forEach(element => {
            element.textContent = user.displayName || 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…';
        });
        
        if (userEmailElement) {
            userEmailElement.textContent = user.email;
        }
    }

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø­Ø¯Ø§Ø« ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„ØªØ³Ø¬ÙŠÙ„
    function setupAuthEvents() {
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const showRegister = document.getElementById('showRegister');
        const showLogin = document.getElementById('showLogin');
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„
        showRegister.addEventListener('click', function(e) {
            e.preventDefault();
            loginForm.classList.add('hidden');
            registerForm.classList.remove('hidden');
        });
        
        showLogin.addEventListener('click', function(e) {
            e.preventDefault();
            registerForm.classList.add('hidden');
            loginForm.classList.remove('hidden');
        });
        
        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            loginUser(email, password);
        });
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
        registerForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const phone = document.getElementById('regPhone').value;
            
            registerUser(name, email, password, phone);
        });
        
        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        const logoutBtn = document.getElementById('logoutBtn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', logoutUser);
        }
    }

    function loginUser(email, password) {
        const loginBtn = document.querySelector('.login-btn');
        const originalText = loginBtn.innerHTML;
        
        loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...';
        loginBtn.disabled = true;
        
        firebase.auth().signInWithEmailAndPassword(email, password)
            .then((userCredential) => {
                console.log('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­');
            })
            .catch((error) => {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);
                alert('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: ' + error.message);
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ø²Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„
                loginBtn.innerHTML = originalText;
                loginBtn.disabled = false;
            });
    }

    function registerUser(name, email, password, phone) {
        const registerBtn = document.querySelector('#registerForm .login-btn');
        const originalText = registerBtn.innerHTML;
        
        registerBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨...';
        registerBtn.disabled = true;
        
        firebase.auth().createUserWithEmailAndPassword(email, password)
            .then((userCredential) => {
                // ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                return userCredential.user.updateProfile({
                    displayName: name
                }).then(() => {
                    // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© ÙÙŠ Firestore
                    return db.collection('users').doc(userCredential.user.uid).set({
                        name: name,
                        email: email,
                        phone: phone,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                });
            })
            .then(() => {
                console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­');
            })
            .catch((error) => {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨:', error);
                alert('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨: ' + error.message);
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ø²Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„
                registerBtn.innerHTML = originalText;
                registerBtn.disabled = false;
            });
    }

    function logoutUser() {
        firebase.auth().signOut()
            .then(() => {
                console.log('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');
                cart = [];
                saveCart();
            })
            .catch((error) => {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬:', error);
            });
    }

    function loadProducts() {
        const productsGrid = document.getElementById('productsGrid');
        console.log('ğŸ“¦ Ø¨Ø¬ÙŠØ¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...');
        
        try {
            db.collection("products").orderBy("name").get()
                .then((querySnapshot) => {
                    console.log('ğŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:', querySnapshot.size);
                    
                    if (querySnapshot.empty) {
                        console.log('âŒ Ù…ÙÙŠØ´ Ù…Ù†ØªØ¬Ø§Øª');
                        displayNoProducts();
                        return;
                    }
                    
                    const products = [];
                    querySnapshot.forEach((doc) => {
                        const productData = doc.data();
                        console.log('ğŸ¯ Ø§Ù„Ù…Ù†ØªØ¬:', productData.name);
                        products.push({ 
                            id: doc.id, 
                            ...productData,
                            price: parseFloat(productData.price) || 0
                        });
                    });
                    
                    displayProducts(products);
                })
                .catch((error) => {
                    console.error("âŒ ØºÙ„Ø·Ø© ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:", error);
                    displayNoProducts();
                });
        } catch (error) {
            console.error("âŒ ØºÙ„Ø·Ø© ÙØ§Ø¯Ø­Ø©:", error);
            displayNoProducts();
        }
    }

    function displayNoProducts() {
        const productsGrid = document.getElementById('productsGrid');
        productsGrid.innerHTML = `
            <div class="no-products">
                <i class="fas fa-box-open"></i>
                <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                <p>Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
            </div>
        `;
    }

function displayProducts(products) {
    const productsGrid = document.getElementById('productsGrid');
    console.log('ğŸ¨ Ø¨Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:', products.length);
    
    const filteredProducts = products.filter(product => 
        product.name !== "Product 1" && 
        product.name !== "product 1" &&
        product.name !== "Product1"
    );
    
    if (filteredProducts.length === 0) {
        displayNoProducts();
        return;
    }
    
    productsGrid.innerHTML = filteredProducts.map(product => {
        const productName = product.name || 'Ù…Ù†ØªØ¬';
        const safeProductName = productName.replace(/'/g, "\\'").replace(/"/g, '\\"');
        const safeProductId = product.id.replace(/'/g, "\\'").replace(/"/g, '\\"');
        
        // ØªØ­Ø¯ÙŠØ¯ Ù…Ù†ØµØ© Ø§Ù„Ù…Ù†ØªØ¬
        const platform = getProductPlatform(product.category || product.platform);
        const platformForFilter = getProductPlatformForFilter(product.category || product.platform);
        
        console.log('ğŸ›’ Ø§Ù„Ù…Ù†ØªØ¬:', productName, 'Ø§Ù„ÙØ¦Ø©:', product.category, 'Ø§Ù„Ù…Ù†ØµØ©:', platform);
        
        return `
        <div class="product-card" data-product-id="${product.id}" data-platform="${platformForFilter}">
            <div class="product-platforms">
                <span class="platform-tag platform-${platform.toLowerCase()}">
                    <i class="fab fa-${getPlatformIcon(platform)}"></i>
                    ${platform}
                </span>
            </div>
            <div class="product-image-container">
                ${product.image ? 
                    `<img src="${product.image}" alt="${productName}" class="product-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` :
                    ''
                }
                <div class="product-image-fallback ${product.image ? 'hidden' : ''}">
                    <span class="product-emoji">${getProductEmoji(product.category)}</span>
                </div>
            </div>
            <div class="product-info">
                <h3 class="product-name">${productName}</h3>
                <p class="product-description">${product.description || ''}</p>
                <div class="product-meta">
                    <span class="product-price">${product.price ? product.price + ' Ø¬.Ù…' : 'Ø§Ø³Ø¹Ø§Ø± ØªÙ†Ø§ÙØ³ÙŠØ©'}</span>
                    <button class="add-to-cart" data-product-id="${safeProductId}" data-product-name="${safeProductName}" data-product-price="${product.price || 0}">
                        <i class="fas fa-shopping-cart"></i> Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©
                    </button>
                </div>
            </div>
        </div>
        `;
    }).join('');
    
    setupCartButtons();
    setupFilterButtons(); // Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙÙŠØ© Ø¨Ø¹Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
}
// Ø¯Ø§Ù„Ø© Ù…Ø­Ø³Ù†Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù†ØµØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙØ¦Ø© ÙÙ‚Ø·
function getProductPlatform(category) {
    const platformMap = {
        // Android
        'android': 'Android',
        'Ø§Ù†Ø¯Ø±ÙˆÙŠØ¯': 'Android',
        'mobile': 'Android',
        'Ù…ÙˆØ¨Ø§ÙŠÙ„': 'Android',
        'Ø¬ÙˆØ§Ù„': 'Android',
        'android games': 'Android',
        'Ø§Ù„Ø¹Ø§Ø¨ Ø§Ù†Ø¯Ø±ÙˆÙŠØ¯': 'Android',
        
        // iOS
        'ios': 'iOS',
        'Ø§ÙŠÙÙˆÙ†': 'iOS',
        'iphone': 'iOS',
        'apple': 'iOS',
        'Ø§Ø¨Ù„': 'iOS',
        'ios games': 'iOS',
        'Ø§Ù„Ø¹Ø§Ø¨ Ø§ÙŠÙÙˆÙ†': 'iOS',
        
        // PC
        'pc': 'PC',
        'ÙƒÙ…Ø¨ÙŠÙˆØªØ±': 'PC',
        'Ø­Ø§Ø³ÙˆØ¨': 'PC',
        'windows': 'PC',
        'ÙˆÙŠÙ†Ø¯ÙˆØ²': 'PC',
        'computer': 'PC',
        'pc games': 'PC',
        'Ø§Ù„Ø¹Ø§Ø¨ ÙƒÙ…Ø¨ÙŠÙˆØªØ±': 'PC',
        'Ø§Ù„Ø¹Ø§Ø¨ Ø­Ø§Ø³ÙˆØ¨': 'PC',
        
        // PlayStation
        'playstation': 'PS4',
        'Ø¨Ù„Ø§ÙŠØ³ØªÙŠØ´Ù†': 'PS4',
        'ps4': 'PS4',
        'ps5': 'PS5',
        'Ø¨Ù„Ø§ÙŠ Ø³ØªÙŠØ´Ù†': 'PS4',
        'playstation games': 'PS4',
        'Ø§Ù„Ø¹Ø§Ø¨ Ø¨Ù„Ø§ÙŠØ³ØªÙŠØ´Ù†': 'PS4',
        
        // Xbox
        'xbox': 'XBOX',
        'Ø§ÙƒØ³Ø¨ÙˆÙƒØ³': 'XBOX',
        'Ø§ÙƒØ³ Ø¨ÙˆÙƒØ³': 'XBOX',
        'xbox games': 'XBOX',
        'Ø§Ù„Ø¹Ø§Ø¨ Ø§ÙƒØ³ Ø¨ÙˆÙƒØ³': 'XBOX',
        
        // Nintendo
        'nintendo': 'Nintendo',
        'Ù†ÙŠÙ†ØªÙ†Ø¯Ùˆ': 'Nintendo',
        'switch': 'Nintendo',
        
        // Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        'default': 'PC'
    };
    
    if (!category) {
        console.log('âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙØ¦Ø© Ù„Ù„Ù…Ù†ØªØ¬ØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ');
        return platformMap.default;
    }
    
    const categoryLower = category.toLowerCase().trim();
    console.log('ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙØ¦Ø©:', categoryLower);
    
    // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙØ¦Ø© ÙÙ‚Ø·
    for (const [key, platform] of Object.entries(platformMap)) {
        if (categoryLower.includes(key)) {
            console.log('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØµØ©:', platform, 'Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒÙ„Ù…Ø©:', key);
            return platform;
        }
    }
    
    console.log('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØµØ© Ù…Ù†Ø§Ø³Ø¨Ø© ÙÙŠ Ø§Ù„ÙØ¦Ø©ØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ');
    return platformMap.default;
}

    // Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ù†ØµØ©
    function getPlatformIcon(platform) {
        const iconMap = {
            'Android': 'android',
            'iOS': 'apple',
            'PC': 'windows',
            'PS4': 'playstation',
            'PS5': 'playstation',
            'XBOX': 'xbox'
        };
        
        return iconMap[platform] || 'desktop';
    }

    function setupCartButtons() {
        console.log('ğŸ”— Ø¨Ø±Ø¨Ø· Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø³Ù„Ø©...');
        const addToCartButtons = document.querySelectorAll('.add-to-cart');
        
        addToCartButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                if (!currentUser) {
                    alert('âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©');
                    return;
                }
                
                const productId = this.getAttribute('data-product-id');
                const productName = this.getAttribute('data-product-name');
                const productPrice = parseFloat(this.getAttribute('data-product-price'));
                
                console.log('ğŸ›’ Ø¶ØºØ·Øª Ø¹Ù„Ù‰ Ø¥Ø¶Ø§ÙØ©:', { productId, productName, productPrice });
                
                addToCart(productId, productName, productPrice);
            });
        });
        
        console.log('âœ… Ø§ØªØ±Ø¨Ø· Ø¹Ø¯Ø¯ Ø£Ø²Ø±Ø§Ø±:', addToCartButtons.length);
    }

    function getProductEmoji(category) {
        const emojis = {
            'Gaming': 'ğŸ®',
            'Electronics': 'ğŸ“±',
            'Accessories': 'ğŸ§',
            'Software': 'ğŸ’»',
            'Subscription': 'ğŸ”„',
            'default': 'ğŸ'
        };
        return emojis[category] || emojis.default;
    }

    function addToCart(productId, productName, productPrice) {
        console.log('ğŸ›’ Ø¨Ø¶ÙŠÙ Ù„Ù„Ø³Ù„Ø©:', { productId, productName, productPrice });
        
        if (!productId || !productName) {
            console.error('âŒ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ù†Ø§Ù‚ØµØ©');
            return;
        }
        
        if (isNaN(productPrice)) {
            productPrice = 0;
            console.warn('âš ï¸ Ø§Ù„Ø³Ø¹Ø± Ù…Ø´ Ø±Ù‚Ù…ØŒ Ø§Ø³ØªØ®Ø¯Ù…Øª 0');
        }
        
        const existingItem = cart.find(item => item.id === productId);
        
        if (existingItem) {
            existingItem.quantity += 1;
            console.log('â• Ø²ÙˆØ¯Øª Ø§Ù„ÙƒÙ…ÙŠØ©:', existingItem.quantity);
        } else {
            cart.push({
                id: productId,
                name: productName,
                price: productPrice,
                quantity: 1
            });
            console.log('ğŸ†• Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ø³Ù„Ø©');
        }
        
        saveCart();
        updateCartCount();
        showCartNotification(productName);
    }

    function showCartNotification(productName) {
        console.log('ğŸ”” Ø¨Ø¹Ù…Ù„ Ø¥Ø´Ø¹Ø§Ø±:', productName);
        
        const oldNotification = document.querySelector('.cart-notification');
        if (oldNotification) {
            document.body.removeChild(oldNotification);
        }
        
        const notification = document.createElement('div');
        notification.className = 'cart-notification';
        notification.innerHTML = `
            <i class="fas fa-check"></i>
            ØªÙ… Ø¥Ø¶Ø§ÙØ© "${productName}" Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.classList.add('show');
        }, 100);
        
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    document.body.removeChild(notification);
                }
            }, 300);
        }, 3000);
    }

    function saveCart() {
        const userCartKey = currentUser ? `mxl_cart_${currentUser.uid}` : 'mxl_cart';
        localStorage.setItem(userCartKey, JSON.stringify(cart));
        console.log('ğŸ’¾ Ø®Ø²Ù†Øª Ø§Ù„Ø³Ù„Ø©:', cart);
    }

    function loadCart() {
        const userCartKey = currentUser ? `mxl_cart_${currentUser.uid}` : 'mxl_cart';
        const savedCart = localStorage.getItem(userCartKey);
        if (savedCart) {
            try {
                cart = JSON.parse(savedCart);
                updateCartCount();
                console.log('ğŸ“¥ Ø§Ù„Ø³Ù„Ø© Ø§ØªØ­Ù…Ù„Øª:', cart);
            } catch (error) {
                console.error('âŒ ØºÙ„Ø·Ø© ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ù„Ø©:', error);
                cart = [];
            }
        } else {
            console.log('ğŸ†• Ø§Ù„Ø³Ù„Ø© ÙØ§Ø¶ÙŠØ© Ø£ÙˆÙ„ Ù…Ø±Ø©');
        }
    }

    function updateCartCount() {
        const cartCount = document.querySelector('.cart-count');
        if (cartCount) {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            console.log('ğŸ”¢ Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ù„Ø© Ø§ØªØ­Ø¯Ø¯:', totalItems);
        }
    }

    function toggleCart() {
        console.log('ğŸ›’ ÙØªØ­ Ø§Ù„Ø³Ù„Ø©');
        showCartModal();
    }

    function showCartModal() {
        console.log('ğŸª Ø¨Ø¹Ù…Ù„ Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø³Ù„Ø©');
        
        const oldModal = document.querySelector('.cart-modal');
        if (oldModal) {
            document.body.removeChild(oldModal);
        }
        
        const modal = document.createElement('div');
        modal.className = 'cart-modal';
        modal.innerHTML = `
            <div class="cart-modal-content">
                <div class="cart-modal-header">
                    <h3>ğŸ›’ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h3>
                    <button class="close-cart">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="cart-items" id="cartItems">
                    ${renderCartItems()}
                </div>
                <div class="cart-total">
                    <strong>ğŸ’° Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${calculateTotal()} Ø¬.Ù…</strong>
                </div>
                <div class="cart-actions">
                    <button class="btn secondary" id="continueShopping">ğŸ›ï¸ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ³ÙˆÙ‚</button>
                    <button class="btn primary" id="checkoutBtn">âœ… Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        modal.querySelector('.close-cart').addEventListener('click', closeCartModal);
        modal.querySelector('#continueShopping').addEventListener('click', closeCartModal);
        modal.querySelector('#checkoutBtn').addEventListener('click', showCheckoutForm);
        
        setupCartModalEvents();
        
        setTimeout(() => {
            modal.classList.add('show');
        }, 100);
    }

    function renderCartItems() {
        console.log('ğŸ“‹ Ø¨Ø±Ø³Ù… Ù…Ø­ØªÙˆÙŠØ§Øª Ø§Ù„Ø³Ù„Ø©:', cart.length);
        
        if (cart.length === 0) {
            return `
                <div class="empty-cart">
                    <i class="fas fa-shopping-cart"></i>
                    <p>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>
                    <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª!</p>
                </div>
            `;
        }
        
        return cart.map(item => {
            const safeId = item.id.replace(/'/g, "\\'").replace(/"/g, '\\"');
            return `
            <div class="cart-item">
                <div class="item-info">
                    <h4>${item.name}</h4>
                    <p>${item.price} Ø¬.Ù… Ã— ${item.quantity}</p>
                    <small>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${item.price * item.quantity} Ø¬.Ù…</small>
                </div>
                <div class="item-actions">
                    <button class="quantity-btn" data-product-id="${safeId}" data-action="decrease">-</button>
                    <span class="quantity">${item.quantity}</span>
                    <button class="quantity-btn" data-product-id="${safeId}" data-action="increase">+</button>
                    <button class="remove-btn" data-product-id="${safeId}" title="Ø­Ø°Ù">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            `;
        }).join('');
    }

    function setupCartModalEvents() {
        document.querySelectorAll('.quantity-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const productId = this.getAttribute('data-product-id');
                const action = this.getAttribute('data-action');
                const item = cart.find(item => item.id === productId);
                
                if (item) {
                    if (action === 'increase') {
                        item.quantity += 1;
                    } else if (action === 'decrease') {
                        item.quantity -= 1;
                    }
                    
                    if (item.quantity < 1) {
                        removeFromCart(productId);
                    } else {
                        saveCart();
                        updateCartCount();
                        updateCartModal();
                    }
                }
            });
        });
        
        document.querySelectorAll('.remove-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const productId = this.getAttribute('data-product-id');
                removeFromCart(productId);
            });
        });
    }

    function removeFromCart(productId) {
        console.log('ğŸ—‘ï¸ Ø¨Ø­Ø°Ù Ù…Ù† Ø§Ù„Ø³Ù„Ø©:', productId);
        cart = cart.filter(item => item.id !== productId);
        saveCart();
        updateCartCount();
        updateCartModal();
        
        if (cart.length === 0) {
            setTimeout(() => {
                closeCartModal();
            }, 1000);
        }
    }

    function calculateTotal() {
        const total = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        return total.toFixed(2);
    }

    function updateCartModal() {
        const cartItems = document.getElementById('cartItems');
        const cartTotal = document.querySelector('.cart-total');
        
        if (cartItems) {
            cartItems.innerHTML = renderCartItems();
            setupCartModalEvents();
        }
        
        if (cartTotal) {
            cartTotal.innerHTML = `<strong>ğŸ’° Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${calculateTotal()} Ø¬.Ù…</strong>`;
        }
    }

    function closeCartModal() {
        console.log('âŒ Ø¨Ù‚ÙÙ„ Ø§Ù„Ø³Ù„Ø©');
        const modal = document.querySelector('.cart-modal');
        if (modal) {
            modal.classList.remove('show');
            setTimeout(() => {
                if (document.body.contains(modal)) {
                    document.body.removeChild(modal);
                }
            }, 300);
        }
    }

function showCheckoutForm() {
    if (!currentUser) {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨');
        return;
    }
    
    const modal = document.querySelector('.cart-modal');
    if (modal) {
        modal.querySelector('.cart-modal-content').innerHTML = `
            <div class="cart-modal-header">
                <h3>ğŸ“‹ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h3>
                <button class="close-cart">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="form-group">
    <label for="transferToPhone">ğŸ“± Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„ *</label>
    <div class="copy-field-container">
        <input type="text" id="transferToPhone" value="01011907743" readonly class="copy-field">
        <button type="button" class="copy-btn" onclick="copyTransferNumber()">
            <i class="fas fa-copy"></i> Ù†Ø³Ø®
        </button>
    </div>
    <small class="field-note">Ø§Ù†Ø³Ø® Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„ÙŠÙ‡</small>
</div>

            <form id="checkoutForm" class="checkout-form">
                <div class="form-group">
                    <label for="checkoutCustomerName">ğŸ‘¤ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ *</label>
                    <input type="text" id="checkoutCustomerName" required placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
                </div>
                <div class="form-group">
                    <label for="checkoutCustomerPhone">ğŸ“ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
                    <input type="tel" id="checkoutCustomerPhone" required placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ">
                </div>
                <div class="form-group">
                    <label for="checkoutCustomerEmail">ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    <input type="email" id="checkoutCustomerEmail" placeholder="example@email.com" value="${currentUser.email || ''}">
                </div>
                
                <!-- Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© -->
                <div class="form-group">
                    <label for="transferFromPhone">ğŸ“± Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­ÙˆÙ„ Ù…Ù†Ù‡ *</label>
                    <input type="tel" id="transferFromPhone" required placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø°ÙŠ Ø­ÙˆÙ„Øª Ù…Ù†Ù‡">
                </div>
                <div class="form-group">
                    <label for="transferTime">ğŸ•’ ØªÙˆÙ‚ÙŠØª Ø§Ù„ØªØ­ÙˆÙŠÙ„ *</label>
                    <input type="datetime-local" id="transferTime" required>
                </div>
                
                <div class="form-group">
                    <label for="checkoutOrderNotes">ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
                    <textarea id="checkoutOrderNotes" rows="3" placeholder="Ø£ÙŠ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø·Ù„Ø¨..."></textarea>
                </div>
                <div class="order-summary">
                    <h4>ğŸ›ï¸ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨:</h4>
                    ${cart.map(item => `
                        <div class="order-item">
                            <span>${item.name}</span>
                            <span>${item.quantity} Ã— ${item.price} Ø¬.Ù…</span>
                        </div>
                    `).join('')}
                    <div class="order-total">
                        <strong>ğŸ’° Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${calculateTotal()} Ø¬.Ù…</strong>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn secondary" id="backToCart">â†©ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø³Ù„Ø©</button>
                    <button type="submit" class="btn primary">ğŸš€ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
                </div>
            </form>
        `;

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ)
        const now = new Date();
        const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
        document.getElementById('transferTime').value = localDateTime;

        // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        modal.querySelector('.close-cart').addEventListener('click', closeCartModal);
        modal.querySelector('#backToCart').addEventListener('click', showCartModal);
        
        // Ø¥Ø¶Ø§ÙØ© event listener Ù„Ù„Ù†Ù…ÙˆØ°Ø¬
        const checkoutForm = document.getElementById('checkoutForm');
        if (checkoutForm) {
            checkoutForm.addEventListener('submit', function(e) {
                e.preventDefault();
                submitOrder();
            });
        }
    }
}

function submitOrder() {
    console.log('ğŸ”„ Ø¨Ø¬Ø±Ø¨ Ø£Ø±Ø³Ù„ Ø§Ù„Ø·Ù„Ø¨...');
    
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… IDs Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    const customerName = document.getElementById('checkoutCustomerName');
    const customerPhone = document.getElementById('checkoutCustomerPhone');
    const transferFromPhone = document.getElementById('transferFromPhone');
    const transferTime = document.getElementById('transferTime');
    
    if (!customerName || !customerPhone || !transferFromPhone || !transferTime) {
        console.error('âŒ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù€ DOM');
        alert('âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ØŒ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©');
        return;
    }
    
    const nameValue = customerName.value.trim();
    const phoneValue = customerPhone.value.trim();
    const transferFromValue = transferFromPhone.value.trim();
    const transferTimeValue = transferTime.value;
    
    console.log('ğŸ“ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©:', { 
        name: nameValue, 
        phone: phoneValue,
        transferFrom: transferFromValue,
        transferTime: transferTimeValue
    });
    
    // ØªØ­Ù‚Ù‚ Ø£ÙƒØ«Ø± Ø¯Ù‚Ø© Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ©
    let hasError = false;
    let errorMessage = 'âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ©:\n';
    
    if (!nameValue) {
        customerName.style.borderColor = 'red';
        hasError = true;
        errorMessage += '- Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„\n';
    } else {
        customerName.style.borderColor = '';
    }
    
    if (!phoneValue) {
        customerPhone.style.borderColor = 'red';
        hasError = true;
        errorMessage += '- Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ\n';
    } else {
        // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·)
        const phoneRegex = /^[0-9]+$/;
        if (!phoneRegex.test(phoneValue)) {
            customerPhone.style.borderColor = 'red';
            hasError = true;
            errorMessage += '- Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·)\n';
        } else if (phoneValue.length < 10) {
            customerPhone.style.borderColor = 'red';
            hasError = true;
            errorMessage += '- Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù‚ØµÙŠØ± Ø¬Ø¯Ø§Ù‹\n';
        } else {
            customerPhone.style.borderColor = '';
        }
    }
    
    if (!transferFromValue) {
        transferFromPhone.style.borderColor = 'red';
        hasError = true;
        errorMessage += '- Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­ÙˆÙ„ Ù…Ù†Ù‡\n';
    } else {
        // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­ÙˆÙ„ Ù…Ù†Ù‡
        const phoneRegex = /^[0-9]+$/;
        if (!phoneRegex.test(transferFromValue)) {
            transferFromPhone.style.borderColor = 'red';
            hasError = true;
            errorMessage += '- Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­ÙˆÙ„ Ù…Ù†Ù‡ ØºÙŠØ± ØµØ­ÙŠØ­ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·)\n';
        } else if (transferFromValue.length < 10) {
            transferFromPhone.style.borderColor = 'red';
            hasError = true;
            errorMessage += '- Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­ÙˆÙ„ Ù…Ù†Ù‡ Ù‚ØµÙŠØ± Ø¬Ø¯Ø§Ù‹\n';
        } else {
            transferFromPhone.style.borderColor = '';
        }
    }
    
    if (!transferTimeValue) {
        transferTime.style.borderColor = 'red';
        hasError = true;
        errorMessage += '- ØªÙˆÙ‚ÙŠØª Ø§Ù„ØªØ­ÙˆÙŠÙ„\n';
    } else {
        transferTime.style.borderColor = '';
    }
    
    if (hasError) {
        alert(errorMessage);
        return;
    }
    
    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡ Ø¥Ø°Ø§ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§Ù…Ù„Ø©
    customerName.style.borderColor = '';
    customerPhone.style.borderColor = '';
    transferFromPhone.style.borderColor = '';
    transferTime.style.borderColor = '';
    
    // ØªØ­ÙˆÙŠÙ„ ØªÙˆÙ‚ÙŠØª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ÙƒØ§Ø¦Ù† ØªØ§Ø±ÙŠØ®
    const transferDateTime = new Date(transferTimeValue);
    
   const orderData = {
                customerName: nameValue,
                customerPhone: phoneValue,
                customerEmail: document.getElementById('checkoutCustomerEmail')?.value.trim() || currentUser.email || '',
                transferFromPhone: transferFromValue,
                transferTime: transferDateTime,
                orderNotes: document.getElementById('checkoutOrderNotes')?.value.trim() || '',
                items: cart,
                total: parseFloat(calculateTotal()),
                status: 'pending',
                userId: currentUser.uid,
                userEmail: currentUser.email,
                timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                orderNumber: generateOrderNumber() // Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù‚Ù… ÙØ±ÙŠØ¯ Ø§Ù„Ø¢Ù†
            };
    console.log('ğŸ“¤ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨:', orderData);
    
    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„
    const submitBtn = document.querySelector('#checkoutForm .btn.primary');
    if (submitBtn) {
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';
        submitBtn.disabled = true;
    }
    
    // Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Firebase
    db.collection("orders").add(orderData)
        .then((docRef) => {
            console.log("âœ… Ø§Ù„Ø·Ù„Ø¨ Ø§ØªØ¨Ø¹Øª Ø¨Ù†Ø¬Ø§Ø­:", docRef.id);
            showOrderSuccess(orderData.orderNumber);
            cart = [];
            saveCart();
            updateCartCount();
        })
        .catch((error) => {
            console.error("âŒ ØºÙ„Ø·Ø© ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨:", error);
            alert('âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');
            
            // Ø¥Ø¹Ø§Ø¯Ø© Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
            if (submitBtn) {
                submitBtn.innerHTML = 'ğŸš€ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨';
                submitBtn.disabled = false;
            }
        });
}

// Ø¯Ø§Ù„Ø© Ù…Ø­Ø³Ù†Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù‚Ù… Ø·Ù„Ø¨ ÙØ±ÙŠØ¯ Ø­Ù‚Ø§Ù‹
function generateOrderNumber() {
            const timestamp = Date.now().toString(36);
            const random = Math.random().toString(36).substr(2, 9);
            const userPart = currentUser ? currentUser.uid.substr(0, 4) : 'GUEST';
            const counter = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            
            return `GS-${timestamp}-${random}-${counter}`.toUpperCase();
        }

    function showOrderSuccess(orderNumber) {
        const modal = document.querySelector('.cart-modal');
        if (modal) {
            modal.querySelector('.cart-modal-content').innerHTML = `
                <div class="order-success">
                    <i class="fas fa-check-circle"></i>
                    <h3>ğŸ‰ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!</h3>
                    <p>Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</p>
                    <p>Ø±Ù‚Ù… Ø·Ù„Ø¨Ùƒ: <strong>${orderNumber}</strong></p>
                    <button class="btn primary" id="closeSuccess">Ù…ÙˆØ§ÙÙ‚</button>
                </div>
            `;
            
            // Ø±Ø¨Ø· Ø²Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚
            modal.querySelector('#closeSuccess').addEventListener('click', closeCartModal);
        }
    }

    function loadTestimonials() {
        const testimonialsGrid = document.getElementById('testimonialsGrid');
        
        try {
            db.collection("testimonials").orderBy("timestamp", "desc").limit(20)
                .get()
                .then((querySnapshot) => {
                    if (querySnapshot.empty) {
                        displayNoTestimonials();
                        return;
                    }
                    
                    const testimonials = [];
                    querySnapshot.forEach((doc) => {
                        testimonials.push({ id: doc.id, ...doc.data() });
                    });
                    
                    displayTestimonials(testimonials);
                })
                .catch((error) => {
                    console.error("Error loading testimonials: ", error);
                    displayNoTestimonials();
                });
        } catch (error) {
            console.error("Firebase error: ", error);
            displayNoTestimonials();
        }
    }

    function displayNoTestimonials() {
        const testimonialsGrid = document.getElementById('testimonialsGrid');
        testimonialsGrid.innerHTML = `
            <div class="no-testimonials">
                <i class="fas fa-comment-alt"></i>
                <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¢Ø±Ø§Ø¡ Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                <p>ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠØ´Ø§Ø±Ùƒ Ø¨Ø±Ø£ÙŠÙ‡!</p>
            </div>
        `;
    }

    function displayTestimonials(testimonials) {
        const testimonialsGrid = document.getElementById('testimonialsGrid');
        
        testimonialsGrid.innerHTML = testimonials.map(testimonial => {
            const date = testimonial.timestamp?.toDate ? 
                        testimonial.timestamp.toDate().toLocaleDateString('ar-EG') : 
                        new Date().toLocaleDateString('ar-EG');
            
            const stars = 'â˜…'.repeat(testimonial.rating || 5) + 'â˜†'.repeat(5 - (testimonial.rating || 5));
            
            return `
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <div class="testimonial-author">
                            <div class="author-avatar">${(testimonial.name || 'Ù…').charAt(0)}</div>
                            <div class="author-info">
                                <h4>${testimonial.name || 'Ø¹Ù…ÙŠÙ„'}</h4>
                                <div class="author-rating">${stars}</div>
                            </div>
                        </div>
                    </div>
                    <div class="testimonial-text">${testimonial.review || 'Ø±Ø£ÙŠ Ø§Ù„Ø¹Ù…ÙŠÙ„'}</div>
                    <div class="testimonial-date">${date}</div>
                </div>
            `;
        }).join('');
    }

    function addTestimonialToFirebase(name, review, rating) {
        const testimonialData = {
            name: name,
            review: review,
            rating: parseInt(rating),
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        };
        
        db.collection("testimonials").add(testimonialData)
            .then((docRef) => {
                console.log("Testimonial added with ID: ", docRef.id);
                loadTestimonials();
            })
            .catch((error) => {
                console.error("Error adding testimonial: ", error);
                alert('âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø£ÙŠØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');
            });
    }

    // ÙØªØ­ Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
    function openProfileModal() {
        if (!currentUser) return;
        
        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        db.collection('users').doc(currentUser.uid).get()
            .then((doc) => {
                if (doc.exists) {
                    const userData = doc.data();
                    document.getElementById('profileName').value = userData.name || '';
                    document.getElementById('profileEmail').value = currentUser.email || '';
                    document.getElementById('profilePhone').value = userData.phone || '';
                    document.getElementById('profileAddress').value = userData.address || '';
                }
            })
            .catch((error) => {
                console.error("Error loading user data:", error);
            });
        
        document.getElementById('profileModal').classList.add('active');
    }

    // Ø¥ØºÙ„Ø§Ù‚ Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
    function closeProfileModal() {
        document.getElementById('profileModal').classList.remove('active');
    }

    // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
    function saveProfile(e) {
        e.preventDefault();
        
        const name = document.getElementById('profileName').value.trim();
        const phone = document.getElementById('profilePhone').value.trim();
        const address = document.getElementById('profileAddress').value.trim();
        
        if (!name) {
            alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„');
            return;
        }
        
        const userData = {
            name: name,
            phone: phone,
            address: address,
            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        };
        
        // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Firestore
        db.collection('users').doc(currentUser.uid).set(userData, { merge: true })
            .then(() => {
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶
                const userNameElements = document.querySelectorAll('#userName, #dropdownUserName');
                userNameElements.forEach(element => {
                    element.textContent = name;
                });
                
                alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
                closeProfileModal();
            })
            .catch((error) => {
                console.error("Error saving profile:", error);
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
            });
    }

function setupEventListeners() {
    console.log('ğŸ”— Ø¨Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø«...');
    setupAuthEvents();
    setupStarRating();
    setupTestimonialForm();
    setupThemeToggle();
    setupSmoothScrolling();
    
    const cartBtn = document.querySelector('.cart-btn');
    if (cartBtn) {
        cartBtn.addEventListener('click', toggleCart);
        console.log('âœ… Ø²Ø± Ø§Ù„Ø³Ù„Ø© Ø§ØªØ±Ø¨Ø·');
    }
    
    // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
    document.getElementById('openProfile').addEventListener('click', function(e) {
        e.preventDefault();
        openProfileModal();
    });
    
    document.getElementById('closeProfile').addEventListener('click', closeProfileModal);
    document.querySelector('.close-modal').addEventListener('click', closeProfileModal);
    document.getElementById('profileForm').addEventListener('submit', saveProfile);
    
    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
    document.getElementById('profileModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeProfileModal();
        }
    });
    
    // â­â­ Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù‡Ù†Ø§ â­â­
    // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø­Ø³Ù†
function setupChat() {
    const chatToggle = document.getElementById('chatToggle');
    const chatContainer = document.getElementById('chatContainer');
    const closeChat = document.querySelector('.close-chat');
    const sendMessageBtn = document.getElementById('sendMessage');
    const messageInput = document.getElementById('messageInput');
    
    if (!chatToggle) {
        console.error('âŒ Ø²Ø± Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù€ DOM');
        return;
    }
    
    // ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
    chatToggle.addEventListener('click', function() {
        chatContainer.classList.toggle('active');
        if (chatContainer.classList.contains('active')) {
            messageInput.focus();
            loadOrCreateChat(); // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ùˆ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
        }
    });
    
    closeChat.addEventListener('click', function() {
        chatContainer.classList.remove('active');
    });
    
    // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
    sendMessageBtn.addEventListener('click', sendChatMessage);
    messageInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            sendChatMessage();
        }
    });
}

// Ø¥Ù†Ø´Ø§Ø¡ Ø£Ùˆ ØªØ­Ù…ÙŠÙ„ Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
async function loadOrCreateChat() {
    if (!currentUser) return;

    console.log('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡/ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©...');
    
    try {
        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø­Ø§Ø¯Ø«Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const existingChat = await db.collection("support_requests")
            .where("userId", "==", currentUser.uid)
            .limit(1)
            .get();

        let chatId;

        if (!existingChat.empty) {
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
            chatId = existingChat.docs[0].id;
            console.log('âœ… ÙˆØ¬Ø¯Øª Ù…Ø­Ø§Ø¯Ø«Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©:', chatId);
        } else {
            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©
            const chatData = {
                userId: currentUser.uid,
                name: currentUser.displayName || 'Ù…Ø³ØªØ®Ø¯Ù…',
                phone: '', // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ù† Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹
                email: currentUser.email,
                status: 'pending',
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
            };
            
            const newChat = await db.collection("support_requests").add(chatData);
            chatId = newChat.id;
            console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©:', chatId);
            
            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨
            await db.collection("support_requests").doc(chatId).collection("messages").add({
                text: "Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ",
                sender: "admin",
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            });
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        loadChatMessages(chatId);
        
    } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡/ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©:', error);
    }
}

// ØªØ­Ù…ÙŠÙ„ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
function loadChatMessages(chatId) {
    console.log('ğŸ“¨ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©:', chatId);
    
    const chatMessages = document.getElementById('chatMessages');
    chatMessages.innerHTML = '<div class="message support"><div class="message-text">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©...</div></div>';

    // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
    db.collection("support_requests")
        .doc(chatId)
        .collection("messages")
        .orderBy("timestamp", "asc")
        .onSnapshot((snapshot) => {
            console.log('ğŸ”„ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³Ø§Ø¦Ù„:', snapshot.size, 'Ø±Ø³Ø§Ù„Ø©');
            chatMessages.innerHTML = '';
            
            if (snapshot.empty) {
                chatMessages.innerHTML = `
                    <div class="message support">
                        <div class="message-text">Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</div>
                        <div class="message-time">Ø§Ù„Ø¢Ù†</div>
                    </div>
                `;
                return;
            }
            
            snapshot.forEach((doc) => {
                const message = doc.data();
                const messageDiv = document.createElement('div');
                
                const date = message.timestamp?.toDate ? 
                    message.timestamp.toDate().toLocaleString('ar-EG') : 
                    new Date().toLocaleString('ar-EG');
                
                messageDiv.className = `message ${message.sender === 'user' ? 'user' : 'support'}`;
                messageDiv.innerHTML = `
                    <div class="message-text">${message.text}</div>
                    <div class="message-time">${date}</div>
                `;
                
                chatMessages.appendChild(messageDiv);
            });
            
            // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø£Ø­Ø¯Ø« Ø±Ø³Ø§Ù„Ø©
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }, (error) => {
            console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„:", error);
            chatMessages.innerHTML = `
                <div class="message support">
                    <div class="message-text">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</div>
                </div>
            `;
        });
}

// Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
async function sendChatMessage() {
    const messageInput = document.getElementById('messageInput');
    const messageText = messageInput.value.trim();
    
    if (!messageText) {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø±Ø³Ø§Ù„Ø©');
        return;
    }
    
    if (!currentUser) {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„');
        return;
    }
    
    console.log('ğŸ“¤ Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©:', messageText);
    
    try {
        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const existingChat = await db.collection("support_requests")
            .where("userId", "==", currentUser.uid)
            .limit(1)
            .get();

        if (existingChat.empty) {
            alert('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©ØŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©');
            return;
        }

        const chatId = existingChat.docs[0].id;
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        await db.collection("support_requests")
            .doc(chatId)
            .collection("messages")
            .add({
                text: messageText,
                sender: 'user',
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            });

        console.log('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­');
        messageInput.value = '';
        
        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
        await db.collection("support_requests")
            .doc(chatId)
            .update({
                status: 'in-progress',
                lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
            });

    } catch (error) {
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:", error);
        alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');
    }
}
    setupChat();
}

    function setupStarRating() {
        const stars = document.querySelectorAll('.star');
        const ratingValue = document.getElementById('ratingValue');
        
        stars.forEach(star => {
            star.addEventListener('click', function() {
                const rating = this.getAttribute('data-rating');
                ratingValue.value = rating;
                
                stars.forEach(s => {
                    if (s.getAttribute('data-rating') <= rating) {
                        s.classList.add('active');
                    } else {
                        s.classList.remove('active');
                    }
                });
            });
        });
    }

    function setupTestimonialForm() {
        const testimonialForm = document.getElementById('testimonialForm');
        
        if (testimonialForm) {
            testimonialForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('customerName').value.trim();
                const review = document.getElementById('customerReview').value.trim();
                const rating = document.getElementById('ratingValue').value;
                
                if (!name || !review || rating === '0') {
                    alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…');
                    return;
                }
                
                addTestimonialToFirebase(name, review, rating);
                
                testimonialForm.reset();
                document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
                document.getElementById('ratingValue').value = '0';
                
                alert('ğŸ‰ Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø±Ø£ÙŠÙƒ Ø¨Ù†Ø¬Ø§Ø­');
            });
        }
    }

    function setupThemeToggle() {
        const themeToggle = document.querySelector('.theme-toggle');
        
        if (themeToggle) {
            themeToggle.addEventListener('click', function() {
                const currentTheme = document.body.getAttribute('data-theme');
                
                if (currentTheme === 'dark') {
                    document.body.removeAttribute('data-theme');
                    localStorage.setItem('theme', 'light');
                    this.innerHTML = '<i class="fas fa-moon"></i>';
                } else {
                    document.body.setAttribute('data-theme', 'dark');
                    localStorage.setItem('theme', 'dark');
                    this.innerHTML = '<i class="fas fa-sun"></i>';
                }
            });
            
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.setAttribute('data-theme', 'dark');
                document.querySelector('.theme-toggle').innerHTML = '<i class="fas fa-sun"></i>';
            }
        }
    }

    function setupSmoothScrolling() {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    }
    // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø­Ø³Ù†
    function setupChat() {
        const chatToggle = document.getElementById('chatToggle');
        const chatContainer = document.getElementById('chatContainer');
        const closeChat = document.querySelector('.close-chat');
        const sendMessageBtn = document.getElementById('sendMessage');
        const messageInput = document.getElementById('messageInput');
        
        if (!chatToggle) {
            console.error('âŒ Ø²Ø± Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù€ DOM');
            return;
        }
        
        // ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
        chatToggle.addEventListener('click', function() {
            chatContainer.classList.toggle('active');
            if (chatContainer.classList.contains('active')) {
                messageInput.focus();
                loadChatHistory(); // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
            }
        });
        
        closeChat.addEventListener('click', function() {
            chatContainer.classList.remove('active');
        });
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
        sendMessageBtn.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        setupChatListener();
    }

    function sendMessage() {
        const messageInput = document.getElementById('messageInput');
        const message = messageInput.value.trim();
        
        if (!message) {
            alert('âš ï¸ ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø±Ø³Ø§Ù„Ø©');
            return;
        }
        
        if (!currentUser) {
            alert('âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„');
            return;
        }
        
        console.log('ğŸ”„ Ø¨Ø¬Ø±Ø¨ Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø©:', message);
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙˆØ±Ø§Ù‹
        addMessageToChat(message, 'user', new Date());
        
        // Ø­ÙØ¸ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙŠ Firebase
        const chatData = {
            userId: currentUser.uid,
            userName: currentUser.displayName || 'Ù…Ø³ØªØ®Ø¯Ù…',
            userEmail: currentUser.email,
            message: message,
            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
            type: 'user',
            read: false
        };
        
        db.collection("chat_messages").add(chatData)
            .then((docRef) => {
                console.log("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­:", docRef.id);
                messageInput.value = '';
                
                // Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø¥Ø¯Ù…Ù†
                notifyAdminNewMessage(message);
            })
            .catch((error) => {
                console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:", error);
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');
            });
    }

    function addMessageToChat(message, sender, timestamp) {
        const chatMessages = document.getElementById('chatMessages');
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}`;
        
        const time = timestamp.toLocaleTimeString('ar-EG', { 
            hour: '2-digit', 
            minute: '2-digit' 
        });
        
        messageDiv.innerHTML = `
            <div class="message-text">${message}</div>
            <div class="message-time">${time}</div>
        `;
        
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function setupChatListener() {
        if (!currentUser) return;
        
        console.log('ğŸ‘‚ Ø¨Ø³ØªÙ…Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…:', currentUser.uid);
        
        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        db.collection("chat_messages")
            .where("userId", "==", currentUser.uid)
            .orderBy("timestamp", "asc")
            .onSnapshot((snapshot) => {
                console.log('ğŸ“¨ ÙÙŠ Ø±Ø³Ø§Ø¦Ù„ Ø¬Ø¯ÙŠØ¯Ø©:', snapshot.size);
                
                const chatMessages = document.getElementById('chatMessages');
                
                // Ù…Ø³Ø­ ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø£ÙˆÙ„ Ù…Ø±Ø©
                if (!chatMessages.dataset.loaded) {
                    chatMessages.innerHTML = '';
                    chatMessages.dataset.loaded = 'true';
                }
                
                snapshot.docChanges().forEach((change) => {
                    if (change.type === "added") {
                        const messageData = change.doc.data();
                        console.log('ğŸ“© Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©:', messageData);
                        
                        // ØªØ­ÙˆÙŠÙ„ timestamp
                        let messageDate;
                        if (messageData.timestamp && messageData.timestamp.toDate) {
                            messageDate = messageData.timestamp.toDate();
                        } else {
                            messageDate = new Date();
                        }
                        
                        addMessageToChat(messageData.message, messageData.type, messageDate);
                    }
                });
            }, (error) => {
                console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„:", error);
            });
    }

    function loadChatHistory() {
        if (!currentUser) return;
        
        console.log('ğŸ“‚ Ø¨Ø¬Ù„Ø¨ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©...');
        
        db.collection("chat_messages")
            .where("userId", "==", currentUser.uid)
            .orderBy("timestamp", "asc")
            .get()
            .then((querySnapshot) => {
                console.log('ğŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„:', querySnapshot.size);
                
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.innerHTML = '';
                
                // Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
                if (querySnapshot.empty) {
                    const welcomeMsg = document.createElement('div');
                    welcomeMsg.className = 'message support';
                    welcomeMsg.innerHTML = `
                        <div class="message-text">Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</div>
                        <div class="message-time">Ø§Ù„Ø¢Ù†</div>
                    `;
                    chatMessages.appendChild(welcomeMsg);
                }
                
                querySnapshot.forEach((doc) => {
                    const messageData = doc.data();
                    let messageDate;
                    
                    if (messageData.timestamp && messageData.timestamp.toDate) {
                        messageDate = messageData.timestamp.toDate();
                    } else {
                        messageDate = new Date();
                    }
                    
                    addMessageToChat(messageData.message, messageData.type, messageDate);
                });
            })
            .catch((error) => {
                console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©:", error);
            });
    }


    // Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø®ØªØ¨Ø§Ø±
function createTestSupportData() {
    console.log('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ...');
    
    const chatData = {
        name: "Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯",
        phone: "01011907743",
        status: "pending",
        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
        lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
    };
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©
    db.collection("support_requests").add(chatData)
        .then((docRef) => {
            const chatId = docRef.id;
            console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©:', chatId);
            
            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            return db.collection("support_requests").doc(chatId).collection("messages").add({
                text: "Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø´Ø­Ù† Ù„Ø¹Ø¨Ø© ÙÙˆØ±ØªÙ†Ø§ÙŠØª",
                sender: "user",
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            });
        })
        .then(() => {
            console.log('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø±');
            showNotification('Ù†Ø¬Ø§Ø­', 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ', 'success');
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø¹Ù…
            loadSupportRequests();
        })
        .catch((error) => {
            console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:', error);
            showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±', 'error');
        });
}

// Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
async function checkDatabaseStructure() {
    try {
        console.log('ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‡ÙŠÙƒÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ø¬Ù…ÙˆØ¹Ø© support_requests
        const supportSnapshot = await db.collection("support_requests").limit(1).get();
        
        if (supportSnapshot.empty) {
            console.log('âš ï¸ Ù…Ø¬Ù…ÙˆØ¹Ø© support_requests ÙØ§Ø±ØºØ©');
            return false;
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø±Ø³Ø§Ø¦Ù„ ÙÙŠ Ø£ÙˆÙ„ Ù…Ø­Ø§Ø¯Ø«Ø©
        const firstChat = supportSnapshot.docs[0];
        const messagesSnapshot = await db.collection("support_requests")
            .doc(firstChat.id)
            .collection("messages")
            .limit(1)
            .get();
        
        console.log('ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:');
        console.log('- Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª:', supportSnapshot.size);
        console.log('- Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙÙŠ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰:', messagesSnapshot.size);
        
        return true;
    } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙŠÙƒÙ„:', error);
        return false;
    }
}

// Ø¥Ø¶Ø§ÙØ© Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ…
function addDatabaseControls() {
    if (document.getElementById('dbControls')) return;
    
    const controlsDiv = document.createElement('div');
    controlsDiv.id = 'dbControls';
    controlsDiv.style.cssText = `
        position: fixed;
        bottom: 70px;
        left: 20px;
        background: rgba(15, 26, 47, 0.95);
        border: 1px solid rgba(33, 150, 243, 0.3);
        border-radius: 10px;
        padding: 15px;
        z-index: 10000;
        display: flex;
        flex-direction: column;
        gap: 10px;
        min-width: 200px;
        backdrop-filter: blur(10px);
    `;
    
    controlsDiv.innerHTML = `
        <h4 style="margin: 0 0 10px 0; color: var(--primary); text-align: center;">ØªØ­ÙƒÙ… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h4>
        <button id="createTestData" style="
            background: var(--success);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
        ">Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø®ØªØ¨Ø§Ø±</button>
        <button id="checkStructure" style="
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
        ">ÙØ­Øµ Ø§Ù„Ù‡ÙŠÙƒÙ„</button>
        <button id="clearTestData" style="
            background: var(--danger);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
        ">Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    `;
    
    document.body.appendChild(controlsDiv);
    
    // Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    document.getElementById('createTestData').addEventListener('click', createTestSupportData);
    document.getElementById('checkStructure').addEventListener('click', checkDatabaseStructure);
    document.getElementById('clearTestData').addEventListener('click', clearTestData);
}

// Ø¯Ø§Ù„Ø© Ù„Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
function clearTestData() {
    showConfirmModal(
        'Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±',
        'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!',
        async () => {
            try {
                console.log('ğŸ—‘ï¸ Ø¬Ø§Ø±ÙŠ Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±...');
                
                // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ø¯Ø¹Ù…
                const snapshot = await db.collection("support_requests").get();
                
                const deletePromises = [];
                snapshot.forEach((doc) => {
                    // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø£ÙˆÙ„Ø§Ù‹
                    const messagesPromise = db.collection("support_requests")
                        .doc(doc.id)
                        .collection("messages")
                        .get()
                        .then((messagesSnapshot) => {
                            const messageDeletes = [];
                            messagesSnapshot.forEach((msgDoc) => {
                                messageDeletes.push(msgDoc.ref.delete());
                            });
                            return Promise.all(messageDeletes);
                        })
                        .then(() => {
                            // Ø«Ù… Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ù†ÙØ³Ù‡Ø§
                            return doc.ref.delete();
                        });
                    
                    deletePromises.push(messagesPromise);
                });
                
                await Promise.all(deletePromises);
                console.log('âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ');
                showNotification('ØªÙ… Ø§Ù„Ù…Ø³Ø­', 'ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                loadSupportRequests();
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                showNotification('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø³Ø­', 'ØªØ¹Ø°Ø± Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }
        }
    );
}
// Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙÙŠØ©
function setupFilterButtons() {
    const filterButtons = document.querySelectorAll('.filter-btn');
    let allProducts = []; // Ù„ØªØ®Ø²ÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    
    console.log('ğŸ”˜ Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙÙŠØ©...');
    
    // Ø¬Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    function collectAllProducts() {
        const productCards = document.querySelectorAll('.product-card');
        allProducts = Array.from(productCards);
        console.log('ğŸ“¦ ØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:', allProducts.length);
    }
    
    // ØªØµÙÙŠØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    function filterProducts(filter) {
        console.log('ğŸ¯ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµÙÙŠØ©:', filter);
        
        const productCards = allProducts.length > 0 ? allProducts : 
                           document.querySelectorAll('.product-card');
        
        let visibleCount = 0;
        
        productCards.forEach(card => {
            const cardPlatform = getCardPlatform(card);
            
            if (filter === 'all' || cardPlatform === filter) {
                card.style.display = 'flex';
                visibleCount++;
            } else {
                card.style.display = 'none';
            }
        });
        
        console.log('ğŸ‘€ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©:', visibleCount);
        
        // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§ØªØŒ Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©
        showNoProductsMessage(visibleCount === 0, filter);
    }
    
    // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ù†ØµØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„ÙƒØ§Ø±Ø¯
    function getCardPlatform(card) {
        const platformTag = card.querySelector('.platform-tag');
        if (platformTag) {
            const platformText = platformTag.textContent.toLowerCase().trim();
            return platformText;
        }
        return 'all';
    }
    
    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ù†ØªØ¬Ø§Øª
    function showNoProductsMessage(show, filter) {
        // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø±Ø³Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹
        const existingMessage = document.querySelector('.no-products-filtered');
        if (existingMessage) {
            existingMessage.remove();
        }
        
        if (show) {
            const productsGrid = document.getElementById('productsGrid');
            const message = document.createElement('div');
            message.className = 'no-products-filtered';
            message.innerHTML = `
                <div class="no-products">
                    <i class="fas fa-search"></i>
                    <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ù‚Ø³Ù… ${getFilterName(filter)}</p>
                    <p>Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
                </div>
            `;
            productsGrid.appendChild(message);
        }
    }
    
    // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„ØªØµÙÙŠØ© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
    function getFilterName(filter) {
        const filterNames = {
            'all': 'Ø§Ù„ÙƒÙ„',
            'pc': 'Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±',
            'ios': 'iOS',
            'android': 'Android'
        };
        return filterNames[filter] || filter;
    }
    
    // Ø¥Ø¶Ø§ÙØ© event listeners Ù„Ù„Ø£Ø²Ø±Ø§Ø±
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            filterButtons.forEach(btn => btn.classList.remove('active'));
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø§Ø· Ù„Ù„Ø²Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯
            this.classList.add('active');
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµÙÙŠØ©
            const filter = this.getAttribute('data-filter');
            filterProducts(filter);
        });
    });
    
    // Ø¬Ù…Ø¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„Ù‡Ø§
    setTimeout(collectAllProducts, 1000);
}

// Ø¯Ø§Ù„Ø© Ù…Ø­Ø³Ù†Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù†ØµØ© Ø§Ù„Ù…Ù†ØªØ¬ (Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø§Ù„ØªØµÙÙŠØ©)
function getProductPlatformForFilter(category) {
    const platformMap = {
        // Android
        'android': 'android',
        'Ø§Ù†Ø¯Ø±ÙˆÙŠØ¯': 'android',
        'mobile': 'android',
        'Ù…ÙˆØ¨Ø§ÙŠÙ„': 'android',
        'Ø¬ÙˆØ§Ù„': 'android',
        
        // iOS
        'ios': 'ios',
        'Ø§ÙŠÙÙˆÙ†': 'ios',
        'iphone': 'ios',
        'apple': 'ios',
        'Ø§Ø¨Ù„': 'ios',
        
        // PC
        'pc': 'pc',
        'ÙƒÙ…Ø¨ÙŠÙˆØªØ±': 'pc',
        'Ø­Ø§Ø³ÙˆØ¨': 'pc',
        'windows': 'pc',
        'ÙˆÙŠÙ†Ø¯ÙˆØ²': 'pc',
        'computer': 'pc',
        
        // PlayStation
        'playstation': 'ps4',
        'Ø¨Ù„Ø§ÙŠØ³ØªÙŠØ´Ù†': 'ps4',
        'ps4': 'ps4',
        'ps5': 'ps5',
        'Ø¨Ù„Ø§ÙŠ Ø³ØªÙŠØ´Ù†': 'ps4',
        
        // Xbox
        'xbox': 'xbox',
        'Ø§ÙƒØ³Ø¨ÙˆÙƒØ³': 'xbox',
        'Ø§ÙƒØ³ Ø¨ÙˆÙƒØ³': 'xbox',
        
        'default': 'pc'
    };
    
    if (!category) {
        return platformMap.default;
    }
    
    const categoryLower = category.toLowerCase().trim();
    
    for (const [key, platform] of Object.entries(platformMap)) {
        if (categoryLower.includes(key)) {
            return platform;
        }
    }
    
    return platformMap.default;
}
    function notifyAdminNewMessage(message) {
        if (!currentUser) return;
        
        const notificationData = {
            userId: currentUser.uid,
            userName: currentUser.displayName || 'Ù…Ø³ØªØ®Ø¯Ù…',
            userEmail: currentUser.email,
            message: message,
            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
            read: false,
            type: 'new_message'
        };
        
        db.collection("admin_notifications").add(notificationData)
            .then(() => {
                console.log("ğŸ”” ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø¥Ø¯Ù…Ù†");
            })
            .catch((error) => {
                console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:", error);
            });
    }
    // Ø¯Ø§Ù„Ø© Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„
function copyTransferNumber() {
    const transferField = document.getElementById('transferToPhone');
    const copyBtn = document.querySelector('.copy-btn');
    
    if (!transferField) {
        console.error('âŒ Ø­Ù‚Ù„ Ø§Ù„Ù†Ø³Ø® Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯');
        return;
    }
    
    // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†Øµ
    transferField.select();
    transferField.setSelectionRange(0, 99999); // Ù„Ù„Ø¬ÙˆØ§Ù„
    
    try {
        // Ù†Ø³Ø® Ø§Ù„Ù†Øµ
        navigator.clipboard.writeText(transferField.value)
            .then(() => {
                console.log('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ù‚Ù…:', transferField.value);
                
                // ØªØºÙŠÙŠØ± Ù…Ø¸Ù‡Ø± Ø§Ù„Ø²Ø±
                if (copyBtn) {
                    const originalHTML = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> ØªÙ… Ø§Ù„Ù†Ø³Ø®!';
                    copyBtn.classList.add('copied');
                    
                    // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© Ø¨Ø¹Ø¯ 2 Ø«Ø§Ù†ÙŠØ©
                    setTimeout(() => {
                        copyBtn.innerHTML = originalHTML;
                        copyBtn.classList.remove('copied');
                    }, 2000);
                }
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±
                showCopyNotification();
            })
            .catch(err => {
                console.error('âŒ ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®:', err);
                fallbackCopy(transferField);
            });
    } catch (err) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø³Ø®:', err);
        fallbackCopy(transferField);
    }
}

// Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø© Ù„Ù„Ù†Ø³Ø®
function fallbackCopy(textField) {
    textField.select();
    document.execCommand('copy');
    console.log('âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø® Ø¨Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©');
    showCopyNotification();
}

// Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø³Ø®
function showCopyNotification() {
    // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù‚Ø¯ÙŠÙ…Ø©
    const oldNotification = document.querySelector('.copy-notification');
    if (oldNotification) {
        document.body.removeChild(oldNotification);
    }
    
    const notification = document.createElement('div');
    notification.className = 'copy-notification';
    notification.innerHTML = `
        <i class="fas fa-check-circle"></i>
        <span>ØªÙ… Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!</span>
    `;
    
    // Ø¥Ø¶Ø§ÙØ© Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
    notification.style.cssText = `
        position: fixed;
        top: 100px;
        right: 20px;
        background: var(--android);
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        z-index: 10001;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        animation: slideInRight 0.3s ease-out;
    `;
    
    document.body.appendChild(notification);
    
    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
    setTimeout(() => {
        if (document.body.contains(notification)) {
            notification.style.animation = 'slideOutRight 0.3s ease-in';
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    document.body.removeChild(notification);
                }
            }, 300);
        }
    }, 3000);
}

// Ø¥Ø¶Ø§ÙØ© Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±
const style = document.createElement('style');
style.textContent = `
    @keyframes slideInRight {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    
    @keyframes slideOutRight {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }
`;
document.head.appendChild(style);
    console.log('ğŸ¯ Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø§ØªØ­Ù…Ù„ ÙƒØ§Ù…Ù„ ÙˆØ¬Ø§Ù‡Ø²');
        </script>



        <script>

let firebaseApp = null;
let db = null;


function initializeFirebase() {
   
    
    // Ø¥Ø°Ø§ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¢Ù…Ù† Ù…ÙˆØ¬ÙˆØ¯ØŒ Ø§Ø³ØªØ®Ø¯Ù…Ù‡
    if (typeof window.firebaseConfig !== 'undefined') {
        console.log('âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¢Ù…Ù†');
        startFirebase(window.firebaseConfig);
    } else {
        // Ø¬Ø±Ø¨ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¢Ù…Ù†
       
        loadFirebaseConfig();
    }
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¢Ù…Ù†
function loadFirebaseConfig() {
    const script = document.createElement('script');
    script.src = './FUCK YOU';
    script.onload = function() {
        console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¢Ù…Ù† Ø¨Ù†Ø¬Ø§Ø­');
        if (window.firebaseConfig) {
            startFirebase(window.firebaseConfig);
        } else {
            showFirebaseError();
        }
    };
    script.onerror = function() {
        console.error('âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¢Ù…Ù†');
        showFirebaseError();
    };
    document.head.appendChild(script);
}

// Ø¨Ø¯Ø¡ Firebase
function startFirebase(config) {
    try {
        console.log('ğŸ¯ ØªÙ‡ÙŠØ¦Ø© Firebase...');
        firebaseApp = firebase.initializeApp(config);
        db = firebase.firestore();
        
        console.log('âœ… Firebase Ø§Ø´ØªØºÙ„ Ø¨Ù†Ø¬Ø§Ø­!');
        console.log('ğŸ“Š Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', db);
        
        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        startApplication();
        
    } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Firebase:', error);
        showFirebaseError();
    }
}

// Ø¹Ø±Ø¶ Ø®Ø·Ø£ Firebase
function showFirebaseError() {
    console.error('ğŸš¨ Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Firebase Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
    // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ø°Ø§ ØªØ±ÙŠØ¯
}

// Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø¹Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Firebase
function startApplication() {
    console.log('ğŸ‰ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ...');
    
    // ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù‚Ø¨Ù„ Ø§Ø³ØªØ¯Ø¹Ø§Ø¦Ù‡Ø§
    if (typeof setupAuth === 'function') {
        setupAuth();
    } else {
        console.log('âš ï¸ setupAuth ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
    }
    
    if (typeof setupEventListeners === 'function') {
        setupEventListeners();
    } else {
        console.log('âš ï¸ setupEventListeners ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
    }
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    loadInitialData();
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
function loadInitialData() {
    console.log('ğŸ“¦ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
    
    if (db) {
        // Ø¬Ø±Ø¨ Ø¬Ù„Ø¨ Ù…Ù†ØªØ¬ Ø¹Ù„Ø´Ø§Ù† ØªØªØ£ÙƒØ¯ Ø¥Ù† Ø§Ù„Ø¯Ø§ØªØ§Ø¨ÙŠØ² Ø´ØºØ§Ù„Ø©
        db.collection("products").limit(1).get()
            .then((querySnapshot) => {
                console.log('âœ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ø¬Ø­');
                console.log('ğŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:', querySnapshot.size);
            })
            .catch((error) => {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
            });
    }
}

// =============================================
// Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯Ù…Ø§ Ø§Ù„ØµÙØ­Ø© ØªØªØ­Ù…Ù„
// =============================================
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸ“„ Ø§Ù„ØµÙØ­Ø© Ø§ØªØ­Ù…Ù„Øª - Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…');
    initializeFirebase();
});

// =============================================
// Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù€ Firebase Ù…Ù† Ø£ÙŠ Ù…ÙƒØ§Ù†
// =============================================
function getFirestore() {
    return db;
}

function getFirebaseAuth() {
    return firebaseApp ? firebase.auth() : null;
}

function getCurrentUser() {
    return firebaseApp ? firebase.auth().currentUser : null;
}
</script>
    </body>

    </html>
